<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="May the Force be with you.">
<meta property="og:type" content="website">
<meta property="og:title" content="hxt&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="hxt&#39;s Blog">
<meta property="og:description" content="May the Force be with you.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hxt">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>hxt's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hxt's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/06/%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/06/%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/" class="post-title-link" itemprop="url">整数反转</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-07-06 16:57:26 / 修改时间：17:30:29" itemprop="dateCreated datePublished" datetime="2023-07-06T16:57:26+08:00">2023-07-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index"><span itemprop="name">LeetCode</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>802</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>题目地址：<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/reverse-integer/">https://leetcode.cn/problems/reverse-integer/</a></p>
<p>这算是一道简单题，我最后还是参考官方题解才做出来<span class="github-emoji"><span>😢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>
<blockquote>
<p>给你一个 32 位的有符号整数 <code>x</code> ，返回将 <code>x</code> 中的数字部分反转后的结果。</p>
<p>如果反转后整数超过 32 位的有符号整数的范围 <code>[−231, 231 − 1]</code> ，就返回 0。</p>
<p><strong>假设环境不允许存储 64 位整数（有符号或无符号）。</strong></p>
<p><strong>示例 ：</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：x = 123</span><br><span class="line">输出：321</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>int类型表示的范围：<strong>-2147483648</strong> ~ <strong>2147483647</strong></p>
<p>这里不能在算出结果后再比较结果是否溢出，因为题目要求不允许使用64位整数，即运算过程中的数字必须在32位有符号整数的范围内，所以在计算过程中可能会直接溢出报错。</p>
<p>这里使用如下思想：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 弹出 x 的末尾数字 digit</span></span><br><span class="line">digit = x % <span class="number">10</span></span><br><span class="line">x /= <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数字 digit 推入 rev 末尾</span></span><br><span class="line">rev = rev * <span class="number">10</span> + digit</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>首先题目要求输入必须是32位int类型，所以不用对输入进行范围判断。假设输入正数<strong>2147483645</strong>，此时反转到最后一个数字前，<code>rev</code>的值为<strong>546384741</strong>，现在还剩最后一个数字，需要执行这句<code>rev = rev * 10 + digit</code>，但在乘以 10 时就已经溢出报错了，所以该代码不能执行，因此需要在每次循环执行<code>rev = rev * 10 + digit</code>前判断<code>rev</code>的范围是否满足：</p>
<p>$⌈\frac{−2^{31}}{10}⌉≤rev≤⌊\frac{2^{31}−1}{10}⌋$</p>
<p>完整代码：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">reverse</span><span class="params">(<span class="type">int</span> x)</span>{</span><br><span class="line">    <span class="type">int</span> t=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x!=<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">if</span>(t&lt;INT_MIN/<span class="number">10</span> || t&gt;INT_MAX/<span class="number">10</span>){ <span class="comment">//INT_MIN 和 INT_MAX 对应最大值和最小值</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        t = t*<span class="number">10</span> + x%<span class="number">10</span>;</span><br><span class="line">        x/=<span class="number">10</span>;</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/07/05/%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/07/05/%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/" class="post-title-link" itemprop="url">寻找两个正序数组的中位数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-07-05 17:28:55 / 修改时间：17:34:09" itemprop="dateCreated datePublished" datetime="2023-07-05T17:28:55+08:00">2023-07-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index"><span itemprop="name">LeetCode</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>题目地址：<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/median-of-two-sorted-arrays/">https://leetcode.cn/problems/median-of-two-sorted-arrays/</a></p>
<blockquote>
<p>题目描述：</p>
<p>给定两个大小分别为 <code>m</code> 和 <code>n</code> 的正序（从小到大）数组 <code>nums1</code> 和 <code>nums2</code>。请你找出并返回这两个正序数组的 <strong>中位数</strong> 。</p>
<p>算法的时间复杂度应该为 <code>O(log (m+n))</code> 。</p>
<p>示例 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums1 = [1,3], nums2 = [2]</span><br><span class="line">输出：2.00000</span><br><span class="line">解释：合并数组 = [1,2,3] ，中位数 2</span><br></pre></td></tr></table></figure>
</blockquote>
<p>第五行，我一开始的写法是</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i,j; i&lt;nums1Size, j&lt;nums2Size;)</span><br></pre></td></tr></table></figure>

<p>这里我犯了一个低级错误，怎么提交都不对:sweat:，正确写法为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i,j; i&lt;nums1Size &amp;&amp; j&lt;nums2Size;)</span><br></pre></td></tr></table></figure>

<p>完整代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">findMedianSortedArrays</span><span class="params">(<span class="type">int</span>* nums1, <span class="type">int</span> nums1Size, <span class="type">int</span>* nums2, <span class="type">int</span> nums2Size)</span>&#123;</span><br><span class="line">    <span class="type">int</span> nums3[nums1Size + nums2Size]; <span class="comment">//定义新数组</span></span><br><span class="line">    <span class="type">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>,k=<span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> result;</span><br><span class="line">    <span class="keyword">for</span> (i,j; i&lt;nums1Size &amp;&amp; j&lt;nums2Size;)&#123; <span class="comment">//讲较小的值放入nums3中</span></span><br><span class="line">        <span class="keyword">if</span> (nums1[i] &lt;= nums2[j])&#123;</span><br><span class="line">            nums3[k] = nums1[i];</span><br><span class="line">            i++;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            nums3[k] = nums2[j];</span><br><span class="line">            j++;</span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(j,k; j&lt; nums2Size; j++,k++)&#123; <span class="comment">//nums1Size &lt; nums2Size 时，会执行该代码</span></span><br><span class="line">        nums3[k] = nums2[j];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i,k; i&lt; nums1Size; i++,k++)&#123; <span class="comment">//nums1Size &gt; nums2Size 时，会执行该代码</span></span><br><span class="line">        nums3[k] = nums1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> m=<span class="number">0</span>;</span><br><span class="line">    m = nums1Size + nums2Size;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(m%<span class="number">2</span> == <span class="number">0</span>)&#123; <span class="comment">//元素总数为偶数</span></span><br><span class="line">        result = (nums3[m/<span class="number">2</span>] + nums3[m/<span class="number">2</span><span class="number">-1</span>])/<span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">//元素总数为奇数</span></span><br><span class="line">        result = nums3[m/<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/06/25/%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2ctf-wiki/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/25/%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2ctf-wiki/" class="post-title-link" itemprop="url">本地部署ctf-wiki</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-06-25 23:04:06 / 修改时间：23:20:15" itemprop="dateCreated datePublished" datetime="2023-06-25T23:04:06+08:00">2023-06-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>955</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>首先打开 ctf-wiki 的GitHub仓库 <a target="_blank" rel="noopener" href="https://github.com/ctf-wiki/ctf-wiki/blob/master/README-zh_CN.md">https://github.com/ctf-wiki/ctf-wiki/blob/master/README-zh_CN.md</a></p>
<p>根据步骤操作，这里我用的是第一种方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 1. clone</span><br><span class="line">git clone https://github.com/ctf-wiki/ctf-wiki.git</span><br><span class="line"># 2. requirements</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"># generate static file in site/</span><br><span class="line">python3 scripts/docs.py build-all        &lt;-----如果是Windows，使用&#x27;python&#x27;而不是&#x27;python3&#x27;</span><br><span class="line"># deploy at http://127.0.0.1:8008</span><br><span class="line">python3 scripts/docs.py serve</span><br></pre></td></tr></table></figure>

<p>在运行<code>python scripts/docs.py build-all</code>时发生报错：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AttributeError: module &#x27;jinja2&#x27; has no attribute &#x27;contextfilter&#x27;</span><br></pre></td></tr></table></figure>

<p>根据这篇<a target="_blank" rel="noopener" href="https://forums.docker.com/t/jinja-mkdocs-issue-breaks-docker101tutorial/122671">文章</a>，我进行了修改，首先使用<code>pip uninstall jinja2</code>删除存在的<code>jinja2</code>，然后打开<code>requirements.txt</code>文件，在最后一行添加<code>jinja2==3.0.3</code>，重新运行<code>pip install -r requirements.txt</code>，然后再次运行<code>python scripts/docs.py build-all</code>，成功解决报错，继续运行<code>python scripts/docs.py serve</code>，会出现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Warning: this is a very simple server.</span><br><span class="line">For development, use the command live instead.</span><br><span class="line">This is here only to preview a site with translations already built.</span><br><span class="line">Make sure you run the build-all command first.</span><br><span class="line">Serving at: http://127.0.0.1:8008</span><br></pre></td></tr></table></figure>

<p>此时在浏览器中打开<code>http://127.0.0.1:8008</code>即可访问ctf-wiki。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/05/18/primitive-type%E5%92%8Creference-type/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/05/18/primitive-type%E5%92%8Creference-type/" class="post-title-link" itemprop="url">primitive type和reference type</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-05-18 15:22:19 / 修改时间：15:22:02" itemprop="dateCreated datePublished" datetime="2023-05-18T15:22:19+08:00">2023-05-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>数据类型可以分为两类：基本数据类型（primitive type）和引用数据类型（reference type）。</p>
<p><strong>基本数据类型</strong>是指整数、浮点数、布尔值等。这些类型的值是直接存储在内存中的，它们的大小是固定的，因此它们的操作速度非常快。</p>
<p><strong>引用数据类型</strong>是指<strong>对象</strong>、<strong>数组</strong>、<strong>函数</strong>等类型。这些类型的值是存储在内存中的地址，而不是直接存储在变量中。因此，当我们操作引用类型时，实际上是在操作存储在内存中的地址，而不是实际的值。这使得引用数据类型的操作速度相对较慢。</p>
<p>一个重要的区别是，基本数据类型的值在传递给函数或赋值给另一个变量时，会被复制一份。而引用数据类型的值在传递给函数或赋值给另一个变量时，只会复制它的地址，而不是它的值。这意味着，如果我们修改了一个引用数据类型的值，它会影响到所有引用该值的变量。</p>
<h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h2><p>例如，在Java中，int是一种基本数据类型，下面是一个示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javaCopy <span class="type">codeint</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> a; <span class="comment">// b的值是10，而不是a的地址</span></span><br><span class="line">b = <span class="number">20</span>; <span class="comment">// a的值仍然是10</span></span><br></pre></td></tr></table></figure>

<h2 id="引用数据类型"><a href="#引用数据类型" class="headerlink" title="引用数据类型"></a>引用数据类型</h2><p><strong>对象</strong>通常是引用数据类型，例如下面这个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PollQuestions</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">Walrus</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Walrus</span>(<span class="number">1000</span>, <span class="number">8.3</span>);</span><br><span class="line">      Walrus b;</span><br><span class="line">      b = a;</span><br><span class="line">      b.weight = <span class="number">5</span>;   <span class="comment">//修改b.weight的值，同时a.weight的值也被改变了</span></span><br><span class="line">      System.out.println(a);</span><br><span class="line">      System.out.println(b);       </span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Walrus</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="type">int</span> weight;</span><br><span class="line">      <span class="keyword">public</span> <span class="type">double</span> tuskSize;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Walrus</span><span class="params">(<span class="type">int</span> w, <span class="type">double</span> ts)</span> &#123;</span><br><span class="line">         weight = w;</span><br><span class="line">         tuskSize = ts;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> String.format(<span class="string">&quot;weight: %d, tusk size: %.2f&quot;</span>, weight, tuskSize);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">weight: 5, tusk size: 8.30</span><br><span class="line">weight: 5, tusk size: 8.30</span><br></pre></td></tr></table></figure>

<p>总之，这两种数据类型在编程中都非常常见，理解它们之间的区别非常重要。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/02/Java%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E4%B8%8E%E9%9D%9E%E9%9D%99%E6%80%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/Java%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E4%B8%8E%E9%9D%9E%E9%9D%99%E6%80%81/" class="post-title-link" itemprop="url">Java中的静态与非静态</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-04-02 17:51:58 / 修改时间：18:42:55" itemprop="dateCreated datePublished" datetime="2023-04-02T17:51:58+08:00">2023-04-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>800</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><p>Java中的<code>Object</code>（对象）是类的实例</p>
</li>
<li><p>静态成员和方法由<code>static</code>修饰，属于类，可以通过类名直接访问，无需创建类的实例。</p>
</li>
<li><p>非静态成员和方法属于类的实例，不需要<code>static</code>修饰，非静态成员和方法必须通过类的实例（对象）访问（通过new关键字创建对象后，再通过对象调用）。</p>
</li>
<li><p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">staticVariable</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 非静态成员变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">nonStaticVariable</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">staticMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;This is a static method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">nonStaticMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;This is a non-static method.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问静态成员和方法</span></span><br><span class="line">Example.staticVariable = <span class="number">1</span>;</span><br><span class="line">Example.staticMethod();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建类的实例并访问非静态成员和方法</span></span><br><span class="line"><span class="type">Example</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Example</span>();</span><br><span class="line">example.nonStaticVariable = <span class="number">1</span>;</span><br><span class="line">example.nonStaticMethod();</span><br></pre></td></tr></table></figure>

<p>在上面的示例代码中，我们定义了一个名为 <code>Example</code> 的类，并在其中定义了一个静态成员变量 <code>staticVariable</code>，一个非静态成员变量 <code>nonStaticVariable</code>，一个静态方法 <code>staticMethod</code> 和一个非静态方法 <code>nonStaticMethod</code>。我们展示了如何访问静态和非静态成员和方法。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/02/Java%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%9B%B8%E7%AD%89%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/Java%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%9B%B8%E7%AD%89%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">Java中的数组相等问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-04-02 17:32:38 / 修改时间：17:37:40" itemprop="dateCreated datePublished" datetime="2023-04-02T17:32:38+08:00">2023-04-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>433</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] arr2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (arr1 == arr2) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;两个数组相等&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;两个数组不相等&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码输出结果为：<code>两个数组不相等</code></p>
<p>当我们比较两个数组是否相等时，我们不能简单地使用<code>==</code>运算符。<code>==</code>运算符比较的是内存中的位，即上述示例中，<code>arr1 == arr2</code>将比较<code>arr1</code>和<code>arr2</code>的<strong>地址</strong>是否相同，而不是数组中的值是否相同。</p>
<h2 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h2><p>Java中提供了<code>java.util.Arrays.equals</code>方法，可以用来比较两个数组是否相等。这个方法会比较两个数组的长度和每个元素的值是否相等，如果两个数组的长度和每个元素的值都相等，则返回<code>true</code>，否则返回<code>false</code>。或是用循环的方式比较每个元素。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/14/%E4%BF%AE%E6%94%B9PowerShell%E4%B8%BB%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/14/%E4%BF%AE%E6%94%B9PowerShell%E4%B8%BB%E9%A2%98/" class="post-title-link" itemprop="url">修改PowerShell的主题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-14 00:00:00 / 修改时间：11:23:02" itemprop="dateCreated datePublished" datetime="2023-03-14T00:00:00+08:00">2023-03-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%91%BD%E4%BB%A4%E8%A1%8C/" itemprop="url" rel="index"><span itemprop="name">命令行</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>317</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我使用的是<code>oh-my-posh</code>。</p>
<p><code>oh-my-posh</code> 是一个 <code>PowerShell</code> 主题框架，用于美化 <code>PowerShell</code> 提示符（prompt）。它可以让你自定义 <code>PowerShell</code> 提示符的样式，使其更加易读和美观。可参考官网的主题样式：<a target="_blank" rel="noopener" href="https://ohmyposh.dev/docs/themes">https://ohmyposh.dev/docs/themes</a></p>
<p>通过输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-PoshPrompt PowerLine</span><br></pre></td></tr></table></figure>

<p>可预览<code>PowerLine</code>主题，这只是暂时性的<br><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/b5787722d59b4286b340086f0ab1145f.png" alt="在这里插入图片描述"></p>
<p>想要永久修改可通过执行以下命令用记事本打开配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notepad $PROFILE</span><br></pre></td></tr></table></figure>
<p>打开后如下：<br><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/31e8516211044bc2a8bd3b0646a5db98.png" alt="在这里插入图片描述"></p>
<p>通过修改配置文件中的主题可修改默认打开主题：<br><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/1648e8d3bcf6411b9d307a5aa18afb37.png" alt="在这里插入图片描述"><br>若将上图中的”Sorin”改为“Agnoster”，则下次打开power shell便是修改后的主题。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/Nmap-live-host/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/Nmap-live-host/" class="post-title-link" itemprop="url">Nmap Live Host Discovery</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-28 14:30:13" itemprop="dateCreated datePublished" datetime="2023-02-28T14:30:13+08:00">2023-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-01-24 22:12:43" itemprop="dateModified" datetime="2023-01-24T22:12:43+08:00">2023-01-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：<a target="_blank" rel="noopener" href="https://tryhackme.com/room/nmap01">https://tryhackme.com/room/nmap01</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>这个房间主要介绍了如何使用 Nmap 查找活动主机(live host)。用于发现活动主机的方法包括：</p>
<ul>
<li>ARP 扫描：这种扫描使用 ARP 请求来发现活动主机。</li>
<li>ICMP 扫描：这种扫描使用 ICMP 请求来标识活动主机。</li>
<li>TCP &#x2F; UDP ping 扫描：此扫描将数据包发送到 TCP 端口和 UDP 端口以确定活动主机。</li>
</ul>
<p>我们还将介绍两种扫描器：<code>arp-scan</code>和<code>masscan</code>。并解释它们如何与 Nmap 发现活动主机这一部分重叠。</p>
<p>下面是 Nmap 扫描通常要经历的步骤，其中很多步骤是可选的，取决于提供的参数。</p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230122092609574.png" alt="image-20230122092609574"></p>
<h2 id="Subnetworks（子网）"><a href="#Subnetworks（子网）" class="headerlink" title="Subnetworks（子网）"></a>Subnetworks（子网）</h2><p><em>网段</em> 是使用共享介质连接的一组计算机，这些介质可以是以太网交换机或 WIFI 接入点。在IP网络中，<em>子网</em> 通常相当于连接在一起并配置为使用相同路由器的一个或多个网段。网段是指物理连接，而子网是指逻辑连接。</p>
<p>下图中有四个网段或子网。每个子网有它自己的 IP 地址范围，并通过路由器连接到更大的网络中。根据每个网络，可能有防火墙强制执行安全策略。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/aa787518e856e0094cb40da8399be0f3.png" alt="img"></p>
<p>如果你连接到相同的子网，你会期望你的扫描器依赖于 ARP (地址解析协议)查询来发现活动主机。ARP 查询的目的是获取硬件地址(MAC 地址) ，这样就可以通过链路层进行通信，然而，我们可以利用这一点来推断主机是否在线。</p>
<p>如果你在网络 A 中，使用 ARP 只能发现该子网（10.1.100.0&#x2F;24）中的设备。假设你已连接到与目标系统子网不同的子网。在这种情况下，扫描仪生成的所有数据包将通过默认网关（路由器）进行路由，以到达另一个子网上的系统。但是，ARP查询不会被路由，因此无法越过子网路由器。ARP 是一个链路层协议，ARP 数据包被绑定到其对应的子网。</p>
<h2 id="Enumerating-Targets（枚举目标）"><a href="#Enumerating-Targets（枚举目标）" class="headerlink" title="Enumerating Targets（枚举目标）"></a>Enumerating Targets（枚举目标）</h2><p>在扫描之前，我们需要指定目标，一般而言，目标可以是：列表、范围或是一个子网，示例如下：</p>
<ul>
<li>list：<code>MACHINE_IP scanme.nmap.org example.com</code> 将扫描 3 个IP地址。</li>
<li>range：<code>10.11.12.15-20</code>将扫描 6 个IP地址：<code>10.11.12.15</code>、<code>10.11.12.16</code> ······ 以及<code>10.11.12.20</code>。</li>
<li>subnet：<code>MACHINE_IP/30</code>将扫描 4 个IP地址。（转换为二进制来看，子网部分有 30 位，主机部分有 2 位；因此共有 2^2^&#x3D;4 个主机即 IP 地址）</li>
</ul>
<p>还可以提供一个文件作为目标列表的输入：<code>nmap -iL list_of_hosts.txt</code></p>
<p>如果要检查 Nmap 将扫描的主机列表，则可以使用<code>nmap -sL TARGETS</code>。此选项将为你提供 Nmap 将要扫描而无需扫描的主机的详细列表；但是，Nmap 将尝试对所有目标进行反向 DNS 解析，以获取其域名。域名可能会向渗透测试者透露各种信息。（如果你不希望 Nmap 连接到DNS服务器，则可以添加<code>-n</code>。）</p>
<h2 id="Discovering-Live-Hosts"><a href="#Discovering-Live-Hosts" class="headerlink" title="Discovering Live Hosts"></a>Discovering Live Hosts</h2><p>让我们回顾下图所示的 TCP&#x2F;IP 层，利用协议来发现活动主机：</p>
<ul>
<li>ARP（链路层）：向网段上的广播地址发送一个帧，并要求具有特定 IP 地址的计算机通过提供其MAC（硬件）地址进行响应。</li>
<li>ICMP（网络层）：ICMP有<a target="_blank" rel="noopener" href="https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml">多种类型</a>。ICMP ping使用类型 8（Echo）和类型 0（Echo Reply）。如果你想 ping 同一子网上的系统，ARP 查询应该在 ICMP Echo之前使用。</li>
<li>TCP（传输层）：扫描仪可以向通用TCP或UDP端口发送一个特制的数据包，以检查目标是否会响应。此方法非常有效，尤其是当 ICMP Echo 被阻止时。</li>
<li>UDP（传输层）：同上。</li>
</ul>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/745e0412b319d324352c7b29863b74f4.png" alt="img"></p>
<h2 id="Nmap-Host-Discovery-Using-ARP"><a href="#Nmap-Host-Discovery-Using-ARP" class="headerlink" title="Nmap Host Discovery Using ARP"></a>Nmap Host Discovery Using ARP</h2><p>Nmap 遵循以下方法来发现活动主机：</p>
<ol>
<li>当特权用户试图扫描本地网络（以太网）上的目标时，Nmap使用ARP请求。特权用户是<code>root</code>用户或属于<code>sudoers</code>并可以运行<code>sudo</code>的用户。</li>
<li>当特权用户尝试扫描本地网络外的目标时，Nmap 使用 ICMP 回显请求、端口80的TCP ACK（确认）、端口443的 TCP SYN（同步）和 ICMP 时间戳请求。</li>
<li>当非特权用户试图扫描本地网络之外的目标时，Nmap 采用 TCP 三次握手方式，将 SYN 数据包发送到 80 和 443 端口。</li>
</ol>
<p>默认情况下，Nmap 使用 ping 扫描来查找活动主机，并且只扫描活动主机。如果希望使用 Nmap 在不扫描系统端口的情况下发现在线主机，可以使用<code>nmap -sn TARGETS</code>。</p>
<p>只有当你和目标系统在同一子网中时，ARP 扫描才可能使用。在以太网（802.3）和 WiFi（802.11）上，你需要知道目标系统的 MAC 地址才能够与之通信。MAC地址是链路层报头所必需的；报头包含源 MAC 地址和目标 MAC 地址以及其他字段。为了获得 MAC 地址，操作系统会发送 ARP 查询。ARP 查询仅在目标与你所在的子网相同时有效，即在相同的以太网或 WiFi 上。在对本地网络进行 Nmap 扫描期间，应该会看到许多 ARP 查询。如果您希望 Nmap 只执行 ARP 扫描而不扫描端口，那么可以使用<code>Nmap -PR -sn TARGETS</code>，其中<code>-PR</code>表示你只需要进行 ARP 扫描。下面的示例显示了 Nmap 使用 ARP 进行主机查找而不进行端口扫描。运行<code>nmap -PR -sn MACHINE_IP/24</code>来发现与目标机器在同一子网上的所有系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PR -sn 10.10.210.6/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.60 ( https://nmap.org ) at 2021-09-02 07:12 BST</span><br><span class="line">Nmap scan report for ip-10-10-210-75.eu-west-1.compute.internal (10.10.210.75)</span><br><span class="line">Host is up (0.00013s latency).</span><br><span class="line">MAC Address: 02:83:75:3A:F2:89 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-100.eu-west-1.compute.internal (10.10.210.100)</span><br><span class="line">Host is up (-0.100s latency).</span><br><span class="line">MAC Address: 02:63:D0:1B:2D:CD (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-165.eu-west-1.compute.internal (10.10.210.165)</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">MAC Address: 02:59:79:4F:17:B7 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-6.eu-west-1.compute.internal (10.10.210.6)</span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: 256 IP addresses (4 hosts up) scanned in 3.12 seconds</span><br></pre></td></tr></table></figure>

<p>在本例中，AtackBox 的 IP 地址是10.10.210.6，它使用 ARP 请求来发现同一子网上的活动主机。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/f0ce4cd34b827f529255c5c73bb909d1.png" alt="img"></p>
<p>说到 ARP 扫描，我们应该提到一个围绕 ARP 查询构建的扫描器：<code>arp-scan</code>；它提供了许多自定义扫描的选项。有关详细信息，请访问 <a target="_blank" rel="noopener" href="http://www.royhills.co.uk/wiki/index.php/Main_Page">arp-scanner wiki</a>。一个常见的选择是 <code>arp-scan --localnet</code> 或者简单的 <code>arp-scan -l</code>。这个命令将发送 ARP 查询到本地网络上所有有效的 IP 地址。此外，如果你的系统有多个接口，并且你有兴趣发现其中一个上的活动主机，你可以使用<code>-I</code> 指定具体接口，例如，<code>sudo arp-scan -I eth0 -l</code> 将向<code>eth0</code>接口上的所有有效IP地址发送 ARP 查询。</p>
<p>在下面的示例中，我们使用<code>arp-scan ATTACKBOX_IP/24</code>扫描了 AtackBox 的子网。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo arp-scan 10.10.210.6/24</span><br><span class="line">Interface: eth0, datalink type: EN10MB (Ethernet)</span><br><span class="line">WARNING: host part of 10.10.210.6/24 is non-zero</span><br><span class="line">Starting arp-scan 1.9 with 256 hosts (http://www.nta-monitor.com/tools/arp-scan/)</span><br><span class="line">10.10.210.75	02:83:75:3a:f2:89	(Unknown)</span><br><span class="line">10.10.210.100	02:63:d0:1b:2d:cd	(Unknown)</span><br><span class="line">10.10.210.165	02:59:79:4f:17:b7	(Unknown)</span><br><span class="line"></span><br><span class="line">4 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.9: 256 hosts scanned in 2.726 seconds (93.91 hosts/sec). 3 responded</span><br></pre></td></tr></table></figure>

<h2 id="Nmap-Host-Discovery-Using-ICMP"><a href="#Nmap-Host-Discovery-Using-ICMP" class="headerlink" title="Nmap Host Discovery Using ICMP"></a>Nmap Host Discovery Using ICMP</h2><p>我们可以 ping 目标网络上的每个 IP 地址，看看谁用 ping reply (ICMP Type 0) 来响应我们的<code>ping</code> (ICMP Type 8&#x2F;Echo) 请求。尽管这将是最直接的方法，但它并不总是可靠的。许多防火墙会阻止 ICMP echo ；Windows 配置了一个主机防火墙，默认情况下阻止 ICMP echo 请求。请记住，如果目标位于相同的子网上，则 ARP 查询将先于 ICMP 请求。</p>
<h3 id="PE"><a href="#PE" class="headerlink" title="-PE"></a>-PE</h3><p>若要使用 ICMP echo request 来发现活动主机，请添加选项 <code>-PE</code>。(记住，如果你不想进行端口扫描，请添加 <code>-sn</code>。)如下图所示，ICMP echo 扫描通过发送 ICMP echo request 来工作，并期望目标使用 ICMP echo reply 进行应答。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/25fb5fd5d2009cf69d7aae40e8fde2ec.png" alt="img"></p>
<p>在下面的示例中，我们使用<code>nmap -PE -sn MACHINE_IP/24</code>扫描了目标所在的子网。此扫描将向子网上的每个 IP 地址发送 ICMP echo 数据包。下面的输出显示了使用<code>sudo nmap -PE -sn MACHINE_IP/24</code>扫描虚拟机的 C 类子网的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PE -sn 10.10.68.220/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.60 ( https://nmap.org ) at 2021-09-02 10:16 BST</span><br><span class="line">Nmap scan report for ip-10-10-68-50.eu-west-1.compute.internal (10.10.68.50)</span><br><span class="line">Host is up (0.00017s latency).</span><br><span class="line">MAC Address: 02:95:36:71:5B:87 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-52.eu-west-1.compute.internal (10.10.68.52)</span><br><span class="line">Host is up (0.00017s latency).</span><br><span class="line">MAC Address: 02:48:E8:BF:78:E7 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-77.eu-west-1.compute.internal (10.10.68.77)</span><br><span class="line">Host is up (-0.100s latency).</span><br><span class="line">MAC Address: 02:0F:0A:1D:76:35 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-110.eu-west-1.compute.internal (10.10.68.110)</span><br><span class="line">Host is up (-0.10s latency).</span><br><span class="line">MAC Address: 02:6B:50:E9:C2:91 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-140.eu-west-1.compute.internal (10.10.68.140)</span><br><span class="line">Host is up (0.00021s latency).</span><br><span class="line">MAC Address: 02:58:59:63:0B:6B (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-142.eu-west-1.compute.internal (10.10.68.142)</span><br><span class="line">Host is up (0.00016s latency).</span><br><span class="line">MAC Address: 02:C6:41:51:0A:0F (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-220.eu-west-1.compute.internal (10.10.68.220)</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">MAC Address: 02:25:3F:DB:EE:0B (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-222.eu-west-1.compute.internal (10.10.68.222)</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">MAC Address: 02:28:B1:2E:B0:1B (Unknown)</span><br><span class="line">Nmap done: 256 IP addresses (8 hosts up) scanned in 2.11 seconds</span><br></pre></td></tr></table></figure>

<p>扫描输出显示八台主机已启动；此外，还显示了它们的MAC地址。一般来说，除非目标与我们的系统位于同一子网，否则我们没必要了解目标的 MAC 地址。上面的输出表明，Nmap不需要发送 ICMP 数据包，因为它根据收到的 ARP 响应确认这些主机已启动。</p>
<p>我们将重复上面的扫描; 然而，这一次，我们将从属于其他子网的系统进行扫描。结果是相似的，但没有 MAC 地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PE -sn 10.10.68.220/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2021-09-02 12:16 EEST</span><br><span class="line">Nmap scan report for 10.10.68.50</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.52</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.77</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.110</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.140</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.142</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.220</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.222</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap done: 256 IP addresses (8 hosts up) scanned in 8.26 seconds</span><br></pre></td></tr></table></figure>

<h3 id="PP"><a href="#PP" class="headerlink" title="-PP"></a>-PP</h3><p>因为 ICMP echo 请求往往会被阻塞，所以你还可以考虑使用 ICMP 时间戳或 ICMP 地址掩码请求来判断系统是否在线。Nmap 使用时间戳请求(ICMP Type 13)并检查它是否将获得时间戳应答(ICMP Type 14)。添加<code>-PP</code>选项告诉 Nmap 使用 ICMP 时间戳请求。</p>
<h3 id="PM"><a href="#PM" class="headerlink" title="-PM"></a>-PM</h3><p>类似地，Nmap 通过添加<code>-PM</code>选项来使用地址掩码查询（ICMP Type 17）。注意：该请求可能会被目标系统或防火墙过滤掉，这时，我们应该考虑使用另一种方法。</p>
<h2 id="Nmap-Host-Discovery-Using-TCP-and-UDP"><a href="#Nmap-Host-Discovery-Using-TCP-and-UDP" class="headerlink" title="Nmap Host Discovery Using TCP and UDP"></a>Nmap Host Discovery Using TCP and UDP</h2><h3 id="TCP-SYN-Ping"><a href="#TCP-SYN-Ping" class="headerlink" title="TCP SYN Ping"></a><strong>TCP SYN Ping</strong></h3><p>我们可以将设置了SYN（同步）标志的数据包发送到 TCP 端口，默认情况下为 80 ，并等待响应。开放端口应回复 SYN&#x2F;ACK （确认）；关闭的端口将导致 RST（重置）。在这种情况下，我们检查是否会得到任何回应，以推断主机是否启动。端口的特定状态在这里并不重要。下图提醒了 TCP 3次握手通常如何工作。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/23e7f481f78de8d3e89ef845b747002d.png" alt="img"></p>
<p>TCP SYN ping 使用方法：<code>-PS</code>选项。<code>-PS</code>后可添加端口号、范围、列表或它们的组合，例如，<code>-PS21</code>将会以 21 号端口为目标，<code>-PS21-25</code>将会以端口 21 、22 、23 、24 、25 为目标。</p>
<h3 id="TCP-ACK-Ping"><a href="#TCP-ACK-Ping" class="headerlink" title="TCP ACK Ping"></a><strong>TCP ACK Ping</strong></h3><p>默认情况下，使用端口 80 。语法类似于 TCP SYN ping 。<code>-PA</code>后面应该是端口号、范围、列表或它们的组合。例如，<code>-PA21</code>、<code>-PA21-25</code>和<code>-PA80,443,8080</code>。如果未指定端口，将使用端口 80 。你必须作为特权用户运行 Nmap 才能完成此任务。如果你以非特权用户身份尝试，Nmap 将尝试进行3次握手。</p>
<p>下图显示了任何带有 ACK 标志的 TCP 数据包都应该返回 设置了 RST 标志的 TCP 数据包。由于带有 ACK 标志的 TCP 数据包不是任何 正在进行的连接 的一部分，因此目标使用设置的 RST 标志进行响应。预期响应用于检测目标主机是否已启动。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/db5ab44a8c700c4ab0603e85e456040d.png" alt="img"></p>
<p>下面是一个示例，运行<code>sudo nmap -PA -sn MACHINE_IP/24</code>以发现在线的主机。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PA -sn 10.10.68.220/24</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2021-09-02 13:46 EEST</span><br><span class="line">Nmap scan report for 10.10.68.52</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.121</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.125</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap scan report for 10.10.68.134</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap scan report for 10.10.68.220</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 29.89 seconds</span><br></pre></td></tr></table></figure>

<h3 id="UDP-Ping"><a href="#UDP-Ping" class="headerlink" title="UDP Ping"></a><strong>UDP Ping</strong></h3><p>与 TCP SYN ping 相反，将 UDP 数据包发送到开放端口不会有任何答复。但是，如果我们向一个关闭的 UDP 端口发送一个 UDP 数据包，我们希望得到一个 ICMP 端口无法访问的数据包；这表明目标系统已经启动并可用。Nmap 使用<code>-PU</code>来进行 UDP ping 。</p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/1b827ef60c39619e281c4ca51a6d57b6.png" alt="img"></p>
<p><img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/c8b2d403667487322058619e561186d2.png" alt="img"></p>
<h3 id="Masscan"><a href="#Masscan" class="headerlink" title="Masscan"></a><strong>Masscan</strong></h3><p>另外，Masscan 使用类似的方法来发现可用的系统。然而，为了快速完成网络扫描，Masscan 在数据包生成速度方面非常积极。语法与 Nmap 非常相似：<code>-p</code> 后面可以跟一个端口号、列表或范围。例如：</p>
<ul>
<li><code>masscan MACHINE_IP/24 -p443</code></li>
<li><code>masscan MACHINE_IP/24 -p80,443</code></li>
<li><code>masscan MACHINE_IP/24 -p22-25</code></li>
<li><code>masscan MACHINE_IP/24 ‐‐top-ports 100</code></li>
</ul>
<h2 id="Using-Reverse-DNS-Lookup（反向DNS查找）"><a href="#Using-Reverse-DNS-Lookup（反向DNS查找）" class="headerlink" title="Using Reverse-DNS Lookup（反向DNS查找）"></a>Using Reverse-DNS Lookup（反向DNS查找）</h2><p>Nmap 的默认行为是使用反向 DNS 查找在线主机。因为主机名可以揭示很多东西，这可能是一个有用的步骤。但是，如果不希望发送此类 DNS 查询，可以使用 <code>-n</code> 跳过此步骤。</p>
<p>默认情况下，Nmap 将查找在线主机；但是，你可以使用选项 <code>-R</code> 来查询 DNS 服务器，即使是针对脱机主机。如果要使用特定的 DNS 服务器，可以添加<code>--dns-servers DNS_SERVER</code>选项。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><table>
<thead>
<tr>
<th align="center">Scan Type</th>
<th align="center">Example Command</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ARP Scan</td>
<td align="center"><code>sudo nmap -PR -sn MACHINE_IP/24</code></td>
</tr>
<tr>
<td align="center">ICMP Echo Scan</td>
<td align="center"><code>sudo nmap -PE -sn MACHINE_IP/24</code></td>
</tr>
<tr>
<td align="center">ICMP Timestamp Scan</td>
<td align="center"><code>sudo nmap -PP -sn MACHINE_IP/24</code></td>
</tr>
<tr>
<td align="center">ICMP Address Mask Scan</td>
<td align="center"><code>sudo nmap -PM -sn MACHINE_IP/24</code></td>
</tr>
<tr>
<td align="center">TCP SYN Ping Scan</td>
<td align="center"><code>sudo nmap -PS22,80,443 -sn MACHINE_IP/30</code></td>
</tr>
<tr>
<td align="center">TCP ACK Ping Scan</td>
<td align="center"><code>sudo nmap -PA22,80,443 -sn MACHINE_IP/30</code></td>
</tr>
<tr>
<td align="center">UDP Ping Scan</td>
<td align="center"><code>sudo nmap -PU53,161,162 -sn MACHINE_IP/30</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">Option</th>
<th align="center">Purpose</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>-n</code></td>
<td align="center">no DNS lookup</td>
</tr>
<tr>
<td align="center"><code>-R</code></td>
<td align="center">reverse-DNS lookup for all hosts</td>
</tr>
<tr>
<td align="center"><code>-sn</code></td>
<td align="center">host discovery only</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/Passive-Reconnaissance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/Passive-Reconnaissance/" class="post-title-link" itemprop="url">Passive Reconnaissance（被动侦察）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-28 14:30:13" itemprop="dateCreated datePublished" datetime="2023-02-28T14:30:13+08:00">2023-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-01-18 22:45:42" itemprop="dateModified" datetime="2023-01-18T22:45:42+08:00">2023-01-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：<a target="_blank" rel="noopener" href="https://tryhackme.com/room/passiverecon">https://tryhackme.com/room/passiverecon</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>侦察(recon)可以定义为收集目标信息的初步调查。我们将侦察分为：</p>
<ol>
<li>被动侦察</li>
<li>主动侦察</li>
</ol>
<h3 id="被动侦察"><a href="#被动侦察" class="headerlink" title="被动侦察"></a>被动侦察</h3><p>在被动侦察中，你将依赖于公开可用的知识。它是你可以从公共可用资源访问的知识，而无需直接与目标进行接触。想象一下，你远远地看着目标领地，却没有踏足那片领地。</p>
<p>被动侦察包括许多活动：</p>
<ul>
<li>从公共DNS服务器查找域的 DNS 记录。</li>
<li>检查与目标网站相关的招聘广告。</li>
<li>阅读有关目标公司的新闻文章。</li>
</ul>
<p>本文主要介绍三个命令行工具：</p>
<ul>
<li><code>whois</code></li>
<li><code>nslookup</code></li>
<li><code>dig</code></li>
</ul>
<p>以及两种在线服务的使用：</p>
<ul>
<li>DNSDumpster</li>
<li>Shodan.io</li>
</ul>
<p>这两个在线服务允许我们收集有关目标的信息，而无需直接连接到目标。</p>
<h3 id="主动侦察"><a href="#主动侦察" class="headerlink" title="主动侦察"></a>主动侦察</h3><p>另一方面，主动侦察则不能如此谨慎地进行。它需要与目标直接接触。就像你检查门窗的锁，以及其他潜在的入口。</p>
<p>主动侦察包括的活动如下：</p>
<ul>
<li>连接到其中一个公司服务器，例如：HTTP、FTP、SMTP。</li>
<li>打电话到公司试图获取信息（社会工程）。</li>
<li>冒充修理工进入公司。</li>
</ul>
<p>考虑到主动侦察的侵入性，除非获得适当的法律授权，否则很快就会陷入法律麻烦。</p>
<h2 id="Whois"><a href="#Whois" class="headerlink" title="Whois"></a>Whois</h2><p>WHOIS 是遵循 <a target="_blank" rel="noopener" href="https://www.ietf.org/rfc/rfc3912.txt">RFC 3912</a> 规范的请求和响应协议。WHOIS服务器在TCP端口43上侦听传入的请求。域名注册商负责维护其租赁域名的WHOIS记录。WHOIS服务器回复与请求的域相关的各种信息。通过 WHOIS ，我们可以了解到以下信息：</p>
<ul>
<li>注册商：域名是通过哪个注册商注册的？</li>
<li>注册人的联系信息：姓名、组织、地址、电话等。(除非通过隐私服务隐藏)</li>
<li>创建、更新和过期日期：域名首次注册是什么时候？上次更新是什么时候？什么时候需要更新？</li>
<li>名称服务器(Name Server)：请求哪个服务器解析域名？</li>
</ul>
<p>使用语法是<code>whois DOMAIN_NAME</code>，其中<code>DOMAIN_NAME</code>是你试图获取信息的域。假设我们需要获取<code>tryhackme.com</code>的信息，直接执行<code>whois tryhackme.com</code>。得到如下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ whois tryhackme.com</span><br><span class="line">[Querying whois.verisign-grs.com]</span><br><span class="line">[Redirected to whois.namecheap.com]</span><br><span class="line">[Querying whois.namecheap.com]</span><br><span class="line">[whois.namecheap.com]</span><br><span class="line">Domain name: tryhackme.com</span><br><span class="line">Registry Domain ID: 2282723194_DOMAIN_COM-VRSN</span><br><span class="line">Registrar WHOIS Server: whois.namecheap.com</span><br><span class="line">Registrar URL: http://www.namecheap.com</span><br><span class="line">Updated Date: 2021-05-01T19:43:23.31Z</span><br><span class="line">Creation Date: 2018-07-05T19:46:15.00Z</span><br><span class="line">Registrar Registration Expiration Date: 2027-07-05T19:46:15.00Z</span><br><span class="line">Registrar: NAMECHEAP INC</span><br><span class="line">Registrar IANA ID: 1068</span><br><span class="line">Registrar Abuse Contact Email: abuse@namecheap.com</span><br><span class="line">Registrar Abuse Contact Phone: +1.6613102107</span><br><span class="line">Reseller: NAMECHEAP INC</span><br><span class="line">Domain Status: clientTransferProhibited https://icann.org/epp<span class="comment">#clientTransferProhibited</span></span><br><span class="line">Registry Registrant ID: </span><br><span class="line">Registrant Name: Withheld <span class="keyword">for</span> Privacy Purposes</span><br><span class="line">Registrant Organization: Privacy service provided by Withheld <span class="keyword">for</span> Privacy ehf</span><br><span class="line">[...]</span><br><span class="line">URL of the ICANN WHOIS Data Problem Reporting System: http://wdprs.internic.net/</span><br><span class="line">&gt;&gt;&gt; Last update of WHOIS database: 2021-08-25T14:58:29.57Z &lt;&lt;&lt;</span><br><span class="line"><span class="string">For more information on Whois status codes, please visit https://icann.org/epp</span></span><br></pre></td></tr></table></figure>

<p>我们可以看到大量信息；我们将按照显示的顺序检查它们。首先，我们注意到我们被重定向到<code>whois.namecheap.com</code>以获取信息。由此可知，在这种情况下，<code>namecheap.com</code>目前正在维护该域名的WHOIS记录。此外，我们可以看到创建日期以及最后更新日期和过期日期。</p>
<p>接下来，我们获得有关注册商和注册人的信息。我们可以找到注册人的姓名和联系信息（除非他们使用某些隐私服务）。尽管未显示在上面，但我们获得了该域的管理员和技术联系人。最后，我们看到域名服务器，如果我们有任何DNS记录要查找，我们应该查询这些服务器。</p>
<p>可以检查收集的信息以发现新的攻击面，例如社会工程或技术攻击。例如，根据渗透测试的范围，你可能会考虑对管理员用户的电子邮件服务器或DNS服务器进行攻击，假设这些服务器属于你的客户端，并且属于渗透测试的范畴。</p>
<p>需要注意的是，由于自动化工具滥用WHOIS查询来获取电子邮件地址，许多WHOIS服务对此采取了措施。例如，他们可能会修改电子邮件地址。此外，许多注册者订阅隐私服务，以避免垃圾邮件发送者获取他们的电子邮件地址，并保持他们的信息隐私。</p>
<h2 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h2><p>使用<code>nslookup</code>（名称服务器查找）查找域名的IP地址。你需要发出命令<code>nslookup DOMAIN_NAME</code>，例如<code>nslookup tryhackme.com</code>。或者，更一般地，你可以使用<code>nslookup OPTIONS DOMAIN_NAME SERVER</code>。这三个主要参数是：</p>
<ul>
<li><code>OPTIONS</code>包括如下表所示的查询类型。例如，你可以使用<code>A</code>(用于IPv4)或者<code>AAAA</code>(用于IPv6)。</li>
<li><code>DOMAIN_NAME</code>是你需要查询的域名。</li>
<li><code>SERVER</code>是要查询的DNS服务器，你可以选择要查询的任何本地或者公用的DNS服务器。Cloudflare 提供<code>1.1.1.1</code>和<code>1.0.0.1</code>，Google 提供<code>8.8.8.8</code>和<code>8.8.4.4</code>，Quad9 提供<code>9.9.9.9</code>和<code>149.112.112.112</code>。如果你想替换ISP的DNS服务器，可以选择更多的公共DNS服务器。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">Query type</th>
<th align="center">Result</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">IPv4 Addresses</td>
</tr>
<tr>
<td align="center">AAAA</td>
<td align="center">IPv6 Addresses</td>
</tr>
<tr>
<td align="center">CNAME</td>
<td align="center">Canonical Name</td>
</tr>
<tr>
<td align="center">MX</td>
<td align="center">Mail Servers</td>
</tr>
<tr>
<td align="center">SOA</td>
<td align="center">Start of Authority</td>
</tr>
<tr>
<td align="center">TXT</td>
<td align="center">TXT Records</td>
</tr>
</tbody></table>
<p>例如，使用<code>nslookup -type=A tryhackme.com 1.1.1.1</code>或<code>nslookup -type=a tryhackme.com 1.1.1.1</code>能够返回 tryhackme.com 使用过的所有 IPv4 地址。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ nslookup -<span class="built_in">type</span>=A tryhackme.com 1.1.1.1</span><br><span class="line">Server:		1.1.1.1</span><br><span class="line">Address:	1.1.1.1<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 172.67.69.208</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 104.26.11.229</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 104.26.10.229</span><br></pre></td></tr></table></figure>

<p>A 和 AAAA 记录分别用于返回 IPv4和 IPv6地址。从渗透测试的角度来看，这种查找非常有用。在上面的示例中，我们从一个域名开始，获得了三个 IPv4地址。假设这些 IP 地址位于渗透测试的范围之内，就可以进一步检查它们是否存在不安全性。</p>
<p>假设你想了解特定域的电子邮件服务器和配置。可以使用 <code>nslookup-type = MX tryhackme.com</code>。这里有一个例子:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ nslookup -<span class="built_in">type</span>=MX tryhackme.com</span><br><span class="line">Server:		127.0.0.53</span><br><span class="line">Address:	127.0.0.53<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">tryhackme.com	mail exchanger = 5 alt1.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 1 aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 10 alt4.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 10 alt3.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 5 alt2.aspmx.l.google.com.</span><br></pre></td></tr></table></figure>

<p>我们可以看到 tryhackme.com 当前的电子邮件配置使用 Google。由于 MX 会查找 Mail Exchange 服务器，我们注意到当一个邮件服务器尝试向<code>@tryhackme.com</code> 发送电子邮件时，它会尝试连接到订单为 1 的 <code>aspmx.l.google.com</code>。如果繁忙或不可用，邮件服务器将尝试按顺序连接到下一个邮件交换服务器、 <code>alt1.aspmx.l.google.com</code> 或 <code>alt2.aspmx.l.google.com</code>。</p>
<p>Google 提供了列出的邮件服务器; 因此，我们不应该期望邮件服务器运行的是一个易受攻击的服务器版本。但是，在其他情况下，我们可能会发现邮件服务器没有得到充分的安全保护或修补。</p>
<p>当你继续被动地侦察你的目标时，这些信息可能会被证明是有价值的。你可以对其他域名重复类似的查询，并尝试不同的类型，例如<code>-type=txt</code>。谁知道你一路走来会发现什么样的信息呢！</p>
<h2 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h2><p>对于更高级的 DNS 查询和其他功能，可以使用 <code>dig</code>，即“ Domain Information Groper”的首字母缩写。让我们使用 dig 查找 MX 记录，并将它们与 <code>nslookup</code> 进行比较。我们可以使用 <code>dig DOMAIN _ NAME</code>，但是为了指定记录类型，我们将使用 <code>dig DOMAIN_NAME TYPE</code>。或者，我们可以使用 <code>dig @SERVER DOMAIN_NAME TYPE</code>选择要查询的服务器。</p>
<ul>
<li><code>SERVER</code>是要查询的 DNS服务器。</li>
<li><code>DOMAIN_NAME</code>是你正在查询的域名。</li>
<li><code>TYPE</code>包含 DNS 记录类型。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ dig tryhackme.com MX</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.16.19-RH &lt;&lt;&gt;&gt; tryhackme.com MX</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;</span><br></pre></td></tr></table></figure>

<p>快速比较一下 <code>nslookup</code> 和 <code>dig</code>的输出，发现 <code>dig</code> 返回了更多的信息，比如默认情况下的 TTL (Time To Live)。如果想查询<code>1.1.1.1</code> DNS 服务器，可以执行 <code>dig @1.1.1.1 tryhackme.com MX</code>。</p>
<h2 id="DNSDumpster"><a href="#DNSDumpster" class="headerlink" title="DNSDumpster"></a>DNSDumpster</h2><p>DNS 查找工具(如 nslookup 和 dig)无法自行查找子域。你正在检查的域可能包括一个不同的子域，该子域可以显示关于目标的许多信息。例如，如果 tryhackme.com 拥有子域名的 wiki.tryhackme.com 和 webmail.tryhackme.com ，那么你需要了解更多关于这两个域名的信息，因为它们可以保存关于你的目标的大量信息。有可能其中一个子域已经建立，但没有定期更新。缺乏适当的定期更新通常会导致脆弱的服务。但是我们怎么知道这样的子域存在呢？</p>
<p>我们可以考虑使用多个搜索引擎来编制一个公开已知子域名的列表。一个搜索引擎是不够的; 此外，我们应该期望通过至少数十个搜索结果来找到有趣的数据。毕竟，你正在寻找没有明确公布的子域，因此不必将其添加到搜索结果的第一页。发现此类子域的另一种方法是依靠暴力强制查询来查找哪些子域具有DNS记录。</p>
<p>为了避免这种耗时的搜索，可以使用一个在线服务，该在线服务可以提供 DNS 查询的详细结果，如 <a target="_blank" rel="noopener" href="https://dnsdumpster.com/">DNSDumpster</a>。如果我们在 DNSDumpster 中搜索 <code>tryhackme.com</code>，我们会发现子域名 <code>blog.tryhackme.com</code> ，这是典型的 DNS 查询所无法提供的。此外，DNSDumpster 将以易于阅读的表格和图表的形式返回收集的 DNS 信息。DNSDumpster 还将提供任何收集到的有关监听服务器的信息。</p>
<h2 id="Shodan-io"><a href="#Shodan-io" class="headerlink" title="Shodan.io"></a>Shodan.io</h2><p>当你的任务是针对特定目标运行渗透测试时，作为被动侦察阶段的一部分，像 <a target="_blank" rel="noopener" href="https://www.shodan.io/">Shodan.io</a> 这样的服务可以帮助你了解客户网络的各种信息，而不需要主动连接。此外，在防御方面，你可以使用 Shodan.io 中的不同服务来了解属于你的组织的已连接和已公开的设备。</p>
<p>Shodan.io 试图连接到每一个可以在线访问的设备，以建立一个连接“事物”的搜索引擎，与网页搜索引擎形成对比。一旦得到响应，它就会收集与服务相关的所有信息，并将其保存在数据库中，以便进行搜索。以下是 tryhackme.com 服务器的保存记录。</p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230118223806186.png" alt="image-20230118223806186"></p>
<p>这个记录显示了一个 Web 服务器; 然而，正如前面提到的，Shodan.io 收集与它能在线找到的任何设备相关的信息。在 Shodan.io 上搜索 <code>tryhackme.com</code> 至少会显示上面截图所示的记录。通过 Shodan.io 的搜索结果，我们可以了解到一些与搜索相关的东西，比如:</p>
<ul>
<li>IP地址</li>
<li>托管公司</li>
<li>地理位置</li>
<li>服务器类型与版本</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><table>
<thead>
<tr>
<th align="center">Purpose</th>
<th align="center">Commandline Example</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Lookup WHOIS record</td>
<td align="center"><code>whois tryhackme.com</code></td>
</tr>
<tr>
<td align="center">Lookup DNS A records</td>
<td align="center"><code>nslookup -type=A tryhackme.com</code></td>
</tr>
<tr>
<td align="center">Lookup DNS MX records at DNS server</td>
<td align="center"><code>nslookup -type=MX tryhackme.com 1.1.1.1</code></td>
</tr>
<tr>
<td align="center">Lookup DNS TXT records</td>
<td align="center"><code>nslookup -type=TXT tryhackme.com</code></td>
</tr>
<tr>
<td align="center">Lookup DNS A records</td>
<td align="center"><code>dig tryhackme.com A</code></td>
</tr>
<tr>
<td align="center">Lookup DNS MX records at DNS server</td>
<td align="center"><code>dig @1.1.1.1 tryhackme.com MX</code></td>
</tr>
<tr>
<td align="center">Lookup DNS TXT records</td>
<td align="center"><code>dig tryhackme.com TXT</code></td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/SQL%E6%B3%A8%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/SQL%E6%B3%A8%E5%85%A5/" class="post-title-link" itemprop="url">SQL注入（SQLi）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-28 14:30:13" itemprop="dateCreated datePublished" datetime="2023-02-28T14:30:13+08:00">2023-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-10 15:53:49" itemprop="dateModified" datetime="2023-06-10T15:53:49+08:00">2023-06-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：<a target="_blank" rel="noopener" href="https://tryhackme.com/room/sqlinjectionlm">https://tryhackme.com/room/sqlinjectionlm</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>使用 SQL 的web应用程序可以转变为 SQL 注入的关键点在于用户提供的数据被包含在 SQL 查询中。</p>
<p>假设，你遇到了一个在线博客，每个博客条目都有一个唯一的 id 号，博客条目可以设置为公共或私有，这取决于它们是否已经准备好公开发布，博客条目的 URL 可能如下所示：</p>
<p><code>https://website.thm/blog?id=1</code></p>
<p>从上面的 URL 中，你可以看到所选的博客条目来自查询字符串(query string)中的 id 参数。Web应用程序需要从数据库中检索文章，并使用如下的SQL语句：</p>
<p><code>SELECT * from blog where id=1 and private=0 LIMIT 1;</code></p>
<p>发现上面的SQL语句正在博客表中查找 id 号为 1 且<code>private</code>列设置为 0 的文章，这意味着它可以被公众查看，并且使用了<code>limit</code>将结果限制为只有一个匹配项。</p>
<p>正如在本文开头所提到的，当用户输入的数据被引入数据库查询时，就会引入SQL注入。在本例中，查询字符串中的 id 参数直接用于 SQL 查询。</p>
<p>假设文章 id 2 仍然锁定为私有的，所以它不能在网站上查看。我们现在可以将 URL 改为：</p>
<p><code>https://website.thm/blog?id=2;--</code></p>
<p>对应生成的 SQL 语句为：</p>
<p><code>SELECT * from blog where id=2;-- and private=0 LIMIT 1;</code></p>
<p>URL 中的分号表示 SQL 语句的结束，两个横杠(<code>--</code>)会导致之后的所有内容都被视为注释。通过这样做，实际上是在运行查询：</p>
<p><code>SELECT * from blog where id=2;--</code></p>
<p>无论是否将其设置为公开，它将返回 id 为 2 的文章。</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="In-Band-SQLi"><a href="#In-Band-SQLi" class="headerlink" title="In-Band SQLi"></a>In-Band SQLi</h3><p>In-Band SQL 注入是最容易检测和利用的类型。In-Band 是指使用相同通信方法来利用漏洞并接受结果。例如，在网页上发现 SQL 注入漏洞，然后能够从数据库中将数据提取到同一页面。</p>
<ul>
<li><p><strong>Error-Based SQL Injection</strong>(基于报错的SQL注入)</p>
<p>这种类型的 SQL 注入对于轻松获取有关数据库结构的信息是最有用的，因为来自数据库的错误信息会直接打印到网页上，这通常可以用于枚举整个数据库。</p>
</li>
<li><p><strong>Union-Based SQL Injection</strong>(基于 union 的SQL注入)</p>
<p>这种类型的注入使用 UNION 操作符和 SELECT 语句一起向页面返回其他结果。这是通过SQL注入漏洞提取大量数据的最常见方法。</p>
</li>
</ul>
<h3 id="Blind-SQLi"><a href="#Blind-SQLi" class="headerlink" title="Blind SQLi"></a>Blind SQLi</h3><p>与 in-band SQL 注入不同，blind SQL 注入几乎没有反馈来提示我们我们是否注入成功，这是因为错误消息已被禁用，但无论如何，注入依旧是有效的。</p>
<ul>
<li><p>Authentication Bypass(身份验证绕过)</p>
<p>最直接的 blind SQLi 技巧之一就是绕过登录表单等身份验证。连接到用户数据库的登录表单通常以这样的方式开发，即：web应用程序对用户名和密码的内容不感兴趣，而等关注两者是否在用户表中匹配。基本上，web应用程序会询问数据库“您是否是用户名为 <strong>bob</strong> 、密码为 <strong>bob123</strong> 的用户？”，数据库会回答“是”或“否”，并根据回答决定web应用程序是否允许你继续操作。</p>
</li>
<li><p><strong>Boolean Based</strong>(布尔盲注)</p>
<p>布尔盲注是指我们从注入尝试中收到的可能是<code>true/false</code>、<code>yes/no</code>、<code>on/off</code>、<code>1/0</code>或者任何只能有两个结果的响应。该结果表明攻击者的 SQL 注入是否成功。虽然响应只有两种结果，但还是能够枚举整个数据库的结构和内容。</p>
<p>例如，可以通过布尔盲注来判断数据库的首字母(<code>admin123&#39; UNION SELECT 1,2,3 where database() like &#39;s%&#39;;--</code>)。</p>
</li>
<li><p><strong>Time Based</strong>(时间盲注)</p>
<p>时间盲注与上述的布尔盲注非常相似，因为发送相同的请求，但没有直观的指示您的查询是错误的还是正确的。相反，正确查询的指标是基于完成查询所需的时间。这种时间延迟是通过在 UNION 语句旁边使用内置方法（如 **SLEEP(x)**）引入的。SLEEP() 方法只能在 UNION SELECT 语句成功时执行。</p>
<p>例如，当试图确定表中的列数时，可以使用以下查询：</p>
<p><code>admin123&#39; UNION SELECT SLEEP(5)</code></p>
<p>如果未产生停顿，那么我们可以推断出该请求未成功，所以我们增加一列：</p>
<p><code>admin123&#39; UNION SELECT SLEEP(5),2;--</code></p>
<p>直到产生 5 秒延迟为止。</p>
</li>
</ul>
<h3 id="Out-of-Band-SQLi"><a href="#Out-of-Band-SQLi" class="headerlink" title="Out of Band SQLi"></a>Out of Band SQLi</h3><p>此类 SQL 注入并不常见，因为它要么取决于数据库服务器上启用的特定功能，要么取决于web应用程序的业务逻辑，后者根据SQL查询的结果进行某种外部网络调用。</p>
<p>Out-Of-Band 攻击通过两个不同的通信渠道进行分类，一个用于发起攻击，另一个用于收集结果。例如，攻击通道可以是web请求，数据收集通道可以监视对你控制的服务发出的HTTP&#x2F;DNS请求。</p>
<p>1） 攻击者通过注入 payload 向易受攻击的网站发出请求。</p>
<p>2） 该网站对数据库进行SQL查询，并传递黑客的 payload 。</p>
<p>3） payload 包含一个请求，该请求强制将包含数据库数据的HTTP请求返回给黑客的计算机。</p>
<h2 id="预防措施"><a href="#预防措施" class="headerlink" title="预防措施"></a>预防措施</h2><h3 id="预编译语句（参数化查询）"><a href="#预编译语句（参数化查询）" class="headerlink" title="预编译语句（参数化查询）"></a>预编译语句（参数化查询）</h3><p>开发人员首先编写 SQL 查询，然后将任何用户输入作为参数添加。编写准备好的语句可以确保 SQL 代码结构不变，并且数据库可以区分查询和数据。作为一个好处，它还使您的代码看起来更干净、更容易阅读。</p>
<h3 id="对输入进行验证"><a href="#对输入进行验证" class="headerlink" title="对输入进行验证"></a>对输入进行验证</h3><p>输入验证可以在很大程度上保护输入到 SQL 查询中的内容。使用允许列表可以将输入限制为仅某些字符串，或者编程语言中的字符串替换方法可以过滤你希望允许或不允许的字符。</p>
<h3 id="对用户输入进行转义"><a href="#对用户输入进行转义" class="headerlink" title="对用户输入进行转义"></a>对用户输入进行转义</h3><p>允许用户输入包含诸如<code>&#39;</code>、<code>&quot;</code>、<code>$</code>、<code>\</code>之类的字符可能会导致SQL查询中断，或者更糟的是，正如我们所了解的那样，打开它们以接受注入攻击。转义用户输入是在这些字符前面加上反斜杠（\）的方法，这样会导致它们被解析为常规字符串而不是特殊字符。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hxt"
      src="/images/hxt.jpg">
  <p class="site-author-name" itemprop="name">hxt</p>
  <div class="site-description" itemprop="description">May the Force be with you.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hxt</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">135k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:03</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
