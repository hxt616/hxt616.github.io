<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="May the Force be with you.">
<meta property="og:type" content="website">
<meta property="og:title" content="hxt&#39;s Blog">
<meta property="og:url" content="http://example.com/page/15/index.html">
<meta property="og:site_name" content="hxt&#39;s Blog">
<meta property="og:description" content="May the Force be with you.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hxt">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/15/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>hxt's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hxt's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/04/02/Java%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%9B%B8%E7%AD%89%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/Java%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E7%9B%B8%E7%AD%89%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">Java中的数组相等问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-04-02 17:37:42" itemprop="dateCreated datePublished" datetime="2023-04-02T17:37:42+08:00">2023-04-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>433</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="示例">示例：</h2>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr1 = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>};</span><br><span class="line"><span class="type">int</span>[] arr2 = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>};</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (arr1 == arr2) {</span><br><span class="line">    System.out.println(<span class="string">"两个数组相等"</span>);</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    System.out.println(<span class="string">"两个数组不相等"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>上述代码输出结果为：<code>两个数组不相等</code></p>
<p>当我们比较两个数组是否相等时，我们不能简单地使用<code>==</code>运算符。<code>==</code>运算符比较的是内存中的位，即上述示例中，<code>arr1 == arr2</code>将比较<code>arr1</code>和<code>arr2</code>的<strong>地址</strong>是否相同，而不是数组中的值是否相同。</p>
<h2 id="解决方法">解决方法：</h2>
<p>Java中提供了<code>java.util.Arrays.equals</code>方法，可以用来比较两个数组是否相等。这个方法会比较两个数组的长度和每个元素的值是否相等，如果两个数组的长度和每个元素的值都相等，则返回<code>true</code>，否则返回<code>false</code>。或是用循环的方式比较每个元素。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/30/GDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/30/GDB/" class="post-title-link" itemprop="url">GDB入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-30 16:13:28" itemprop="dateCreated datePublished" datetime="2023-03-30T16:13:28+08:00">2023-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GDB/" itemprop="url" rel="index"><span itemprop="name">GDB</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考：</p>
<p>http://c.biancheng.net/gdb/</p>
<p>https://www.cnblogs.com/acceptedzhs/p/13161213.html</p>
<p>https://zhuanlan.zhihu.com/p/259625135</p>
<p>https://blog.51cto.com/u_15127591/3564713</p>
<p>相关资料：</p>
<p>http://note.iawen.com/note/programming/gdb GDB入门+命令大全</p>
<p>https://www.cnblogs.com/acceptedzhs/p/13161213.html
较详细的gdb入门资料</p>
<p>https://www.cnblogs.com/acceptedzhs/p/12562880.html gdb高级技巧</p>
<p>https://www.cnblogs.com/lvdongjie/p/8994092.html GDB用法详解</p>
<h1 id="gdb">GDB</h1>
<p>维基百科上对GDB的解释是这样的：<strong>GNU调试器</strong>（英语：<strong>G</strong>NU
<strong>D</strong>e<strong>b</strong>ugger，缩写：<strong>GDB</strong>），是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/GNU">GNU</a>软件系统中的标准<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/调试工具">调试器</a>，此外GDB也是个具有移携性的调试器，经过移携需求的调修与重新编译，如今许多的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/類UNIX">类UNIX</a>操作系统上都可以使用GDB，而现有GDB所能支持调试的编程语言有<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/C語言">C</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/C%2B%2B">C++</a>、<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Pascal_(程式語言)">Pascal</a>以及<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Fortran">FORTRAN</a>。</p>
<h2 id="gdb入门">GDB入门</h2>
<p>将以下程序作为示例，将该文件命名为main.c</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> <span class="type">int</span> n,sum;</span><br><span class="line">    n = <span class="number">1</span>;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(n &lt;= <span class="number">100</span>)</span><br><span class="line">    {</span><br><span class="line">        sum = sum + n;</span><br><span class="line">        n = n+<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>首先要使用gcc来编译源文件，且要使用<code>-g</code>选项，这样可以生成能够被gdb调试的可执行文件。</p>
<p><code>root@ls-jc2uT1jQ:~# gcc -g main.c -o main</code>将可执行文件命名为main。</p>
<ol type="1">
<li><p>启动GDB调试器</p>
<p>方法一：<code>root@ls-jc2uT1jQ:~# gdb main [--silent]</code>
(--silent选项会将部分没用的信息屏蔽)</p>
<p>方法二：也可不在gdb后加可执行文件名，进入gdb后利用file选项加载可执行文件</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@ls-jc2uT1jQ:~<span class="comment"># gdb -q   &lt;---"-q"选项可省略不必要的输出信息</span></span><br><span class="line">(gdb) file main</span><br><span class="line">Reading symbols from main...</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>打印源代码</p>
<p><code>l</code>选项会将带行号的源代码打印出来(注意“l”是“list”的缩写，不是数字“1”)，默认显示前十行代码，可直接回车查看后续代码。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root@ls-jc2uT1jQ:~<span class="comment"># gdb main --silent</span></span><br><span class="line">Reading symbols from main...</span><br><span class="line">(gdb) l</span><br><span class="line">1	<span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line">2	int main ()</span><br><span class="line">3	{</span><br><span class="line">4	    unsigned long long int n, <span class="built_in">sum</span>;</span><br><span class="line">5	</span><br><span class="line">6	    n = 1;</span><br><span class="line">7	    <span class="built_in">sum</span> = 0;</span><br><span class="line">8	</span><br><span class="line">9	    <span class="keyword">while</span> (n &lt;= 100)</span><br><span class="line">10	    {</span><br><span class="line">(gdb) </span><br><span class="line">11	        <span class="built_in">sum</span> = <span class="built_in">sum</span> + n;</span><br><span class="line">12	        n = n + 1;</span><br><span class="line">13	    }</span><br><span class="line">14	</span><br><span class="line">15	    <span class="built_in">return</span> 0;</span><br><span class="line">16	}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>设置断点。</p>
<p><code>b 函数名|行号</code>（b为break的缩写）</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b 9   &lt;---在第9行设置断点</span><br><span class="line">Breakpoint 1 at 0x1141: file main.c, line 9.</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>运行程序。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">指令</th>
<th style="text-align: left;">作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">r（全称run）</td>
<td style="text-align: left;">从头开始运行程序至断点</td>
</tr>
<tr class="even">
<td style="text-align: left;">c（全称continue）</td>
<td style="text-align: left;">从当前位置运行程序至下一个断点</td>
</tr>
<tr class="odd">
<td style="text-align: left;">u（全称until）行号</td>
<td style="text-align: left;">从当前位置运行程序至指定行号</td>
</tr>
</tbody>
</table>
<p>以<code>r</code>为例：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(gdb) r    &lt;---运行至断点，且处在断点的语句并不执行</span><br><span class="line">Starting program: /root/main </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at main.c:9</span><br><span class="line">9	    <span class="keyword">while</span> (n &lt;= 100)</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>单步执行</p>
<table>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>n（全称next）</td>
<td>单步执行，不进入函数内部</td>
</tr>
<tr class="even">
<td>s（全称step）</td>
<td>单步执行，进入函数内部</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(gdb) s    &lt;---执行<span class="keyword">while</span>循环，在11行停下，此时11行的代码并未执行</span><br><span class="line">11	        <span class="built_in">sum</span> = <span class="built_in">sum</span> + n;</span><br><span class="line">(gdb) n</span><br><span class="line">12	        n = n + 1;</span><br></pre></td></tr></tbody></table></figure>
<p>拓展：si命令类似于s命令，ni命令类似于n命令。所不同的是，这两个命令（si/ni）所针对的是汇编指令，而s/n针对的是源代码。</p></li>
<li><p>输出变量</p>
<table>
<colgroup>
<col style="width: 31%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>p（全称print） 变量名</td>
<td>打印一次变量名/函数调用对应的值</td>
</tr>
<tr class="even">
<td>disp（display） 变量名</td>
<td>设置在每次停下时都打印该变量名/函数调用对应的值</td>
</tr>
</tbody>
</table>
<p>以p为例：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p n      &lt;---打印代码中变量n的值</span><br><span class="line"><span class="variable">$1</span> = 1</span><br></pre></td></tr></tbody></table></figure>
<p>以disp为例：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) disp n</span><br><span class="line">1: n = 1</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>退出调试</p>
<p>直接输入<code>q</code>并回车</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(gdb) q</span><br><span class="line">A debugging session is active.</span><br><span class="line"></span><br><span class="line">	Inferior 1 [process 467365] will be killed.</span><br><span class="line"></span><br><span class="line">Quit anyway? (y or n) y</span><br><span class="line">root@ls-jc2uT1jQ:~<span class="comment">#    &lt;---已退出</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="gdb汇编调试">GDB汇编调试</h2>
<h3 id="部分指令"><strong>部分指令</strong></h3>
<table>
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>指令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>si</td>
<td>单步执行，进入函数内部</td>
</tr>
<tr class="even">
<td>ni</td>
<td>单步执行，不进入函数内部</td>
</tr>
<tr class="odd">
<td>disp /i $pc(或寄存器)</td>
<td>显示出当前执行的语句，下一行展示相关寄存器和堆栈内容的变化</td>
</tr>
<tr class="even">
<td>i r</td>
<td>查看所有寄存器的值</td>
</tr>
<tr class="odd">
<td>i r rax</td>
<td>查看rax寄存器的值</td>
</tr>
<tr class="even">
<td>layout src</td>
<td>显示源代码窗口</td>
</tr>
<tr class="odd">
<td>layout asm</td>
<td>显示反汇编窗口</td>
</tr>
<tr class="even">
<td>disassemble</td>
<td>获取汇编代码</td>
</tr>
</tbody>
</table>
<h3 id="查看指定内存地址处的内容"><strong>查看指定内存地址处的内容</strong>：</h3>
<p>命令格式：<strong>x/nfu addr</strong>
如：<code>(gdb) x/3sw  $eax</code></p>
<p><strong>x : examine 的缩写</strong></p>
<p><strong>n : 表示要显示的内存单元个数</strong></p>
<p><strong>f : 表示显示方式, 可取如下值</strong></p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x 按十六进制格式显示变量。</span><br><span class="line">d 按十进制格式显示变量。</span><br><span class="line">c 按字符格式显示变量。</span><br><span class="line">f 按浮点数格式显示变量。</span><br></pre></td></tr></tbody></table></figure>
<p><strong>u表示一个地址单元的长度</strong>，与n一起表示显示的地址长度</p>
<figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b表示单字节，</span><br><span class="line">h表示双字节，</span><br><span class="line">w表示四字节，</span><br><span class="line">g表示八字节</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/14/%E4%BF%AE%E6%94%B9PowerShell%E4%B8%BB%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/14/%E4%BF%AE%E6%94%B9PowerShell%E4%B8%BB%E9%A2%98/" class="post-title-link" itemprop="url">修改PowerShell的主题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-03-14 00:00:00 / 修改时间：11:23:04" itemprop="dateCreated datePublished" datetime="2023-03-14T00:00:00+08:00">2023-03-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%91%BD%E4%BB%A4%E8%A1%8C/" itemprop="url" rel="index"><span itemprop="name">命令行</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>317</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我使用的是<code>oh-my-posh</code>。</p>
<p><code>oh-my-posh</code> 是一个 <code>PowerShell</code>
主题框架，用于美化 <code>PowerShell</code>
提示符（prompt）。它可以让你自定义 <code>PowerShell</code>
提示符的样式，使其更加易读和美观。可参考官网的主题样式：https://ohmyposh.dev/docs/themes</p>
<p>通过输入</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-PoshPrompt PowerLine</span><br></pre></td></tr></tbody></table></figure>
<p>可预览<code>PowerLine</code>主题，这只是暂时性的 <img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/b5787722d59b4286b340086f0ab1145f.png" alt="在这里插入图片描述"></p>
<p>想要永久修改可通过执行以下命令用记事本打开配置文件</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">notepad $PROFILE</span><br></pre></td></tr></tbody></table></figure>
<p>打开后如下： <img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/31e8516211044bc2a8bd3b0646a5db98.png" alt="在这里插入图片描述"></p>
<p>通过修改配置文件中的主题可修改默认打开主题： <img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/1648e8d3bcf6411b9d307a5aa18afb37.png" alt="在这里插入图片描述">
若将上图中的"Sorin"改为“Agnoster”，则下次打开power
shell便是修改后的主题。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/27/RSA%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/27/RSA%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">RSA算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-27 17:38:20" itemprop="dateCreated datePublished" datetime="2023-01-27T17:38:20+08:00">2023-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-06 13:56:06" itemprop="dateModified" datetime="2024-09-06T13:56:06+08:00">2024-09-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">非对称加密算法</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考：https://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html</p>
<p>​
https://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html</p>
<h2 id="非对称加密">非对称加密</h2>
<p>它需要两个<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/密钥">密钥</a>，一个是公开密钥，另一个是私有密钥；公钥用作加密，私钥则用作解密。使用公钥把<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/明文">明文</a>加密后所得的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/密文">密文</a>，只能用相对应的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/私钥">私钥</a>才能解密并得到原本的明文，最初用来加密的公钥不能用作解密。由于加密和解密需要两个不同的密钥，故被称为非对称加密；不同于加密和解密都使用同一个密钥的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/对称加密">对称加密</a>。公钥可以公开，可任意向外发布；私钥不可以公开，必须由用户自行严格秘密保管，绝不透过任何途径向任何人提供，也不会透露给被信任的要通信的另一方。（维基百科）</p>
<h2 id="前置知识点">前置知识点</h2>
<h3 id="互质">互质</h3>
<ol type="1">
<li>任意两个质数构成互质关系，比如13和61。</li>
</ol>
<p>　2.
一个数是质数，另一个数只要不是前者的倍数，两者就构成互质关系，比如3和10。</p>
<p>　3.
如果两个数之中，较大的那个数是质数，则两者构成互质关系，比如97和57。</p>
<p>　4. 1和任意一个自然数是都是互质关系，比如1和99。</p>
<p>　5. p是大于1的整数，则p和p-1构成互质关系，比如57和56。</p>
<p>　6. p是大于1的奇数，则p和p-2构成互质关系，比如17和15。</p>
<h3 id="欧拉函数">欧拉函数</h3>
<p>任意给定正整数 n，在小于等于 n 的正整数中，有 x 个与 n
构成互质关系的正整数。计算 x 的方法就叫欧拉函数，用 φ(n) 表示。</p>
<p>例：在 1 到 8 之中，与 8 形成互质关系的是 1、3、5、7，所以 φ(n) =
4。</p>
<p>关于 φ(n) 的计算方法，共五种情况：</p>
<ol type="1">
<li><p>如果n=1，则 φ(1) = 1
。因为1与任何数（包括自身）都构成互质关系。</p></li>
<li><p>如果n是质数，则 φ(n)=n-1
。因为质数与小于它的每一个数，都构成互质关系。比如5与1、2、3、4都构成互质关系。</p></li>
<li><p>如果n是质数的某一个次方，即 n = p<sup>k</sup>
(p为质数，k为大于等于1的整数)，则</p>
<p><img src="https://chart.googleapis.com/chart?cht=tx&amp;chl=\phi(p%5E%7Bk%7D)%3Dp%5E%7Bk%7D-p%5E%7Bk-1%7D&amp;chs=40"></p>
<p>比如 φ(8) = φ(2<sup>3</sup>) =2<sup>3</sup> - 2<sup>2</sup> = 8 -4 =
4。</p>
<p>这是因为只有当一个数不包含质数p，才可能与n互质。而包含质数p的数一共有p<sup>(k-1)</sup>个，即1×p、2×p、3×p、...、p<sup>(k-1)</sup>×p，把它们去除，剩下的就是与n互质的数。</p>
<p>上面的式子还可以写成下面的形式：</p>
<p><img src="https://chart.googleapis.com/chart?cht=tx&amp;chl=\phi(p%5E%7Bk%7D)%3Dp%5E%7Bk%7D-p%5E%7Bk-1%7D%3Dp%5E%7Bk%7D(1-\frac%7B1%7D%7Bp%7D)&amp;chs=60"></p>
<p>可以看出，上面的第二种情况是 k=1 时的特例。</p></li>
<li><p>如果n可以分解成两个互质的整数之积，</p>
<blockquote>
<p>　　n = p1 × p2</p>
</blockquote>
<p>则</p>
<blockquote>
<p>　　φ(n) = φ(p1p2) = φ(p1)φ(p2)</p>
</blockquote></li>
<li><p>任意一个大于1的正整数，都可以写成一系列质数的积，根据前面几种情况可以得出公式：</p>
<figure>
<img src="https://chart.googleapis.com/chart?cht=tx&amp;chl=\phi(n)%3Dn(1-\frac%7B1%7D%7Bp_%7B1%7D%7D)(1-\frac%7B1%7D%7Bp_%7B2%7D%7D)...(1-\frac%7B1%7D%7Bp_%7Br%7D%7D)&amp;chs=60" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure></li>
</ol>
<h3 id="欧拉定理">欧拉定理</h3>
<p>如果两个正整数a和n互质，则n的欧拉函数 φ(n) 可以让下面的等式成立：</p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20221017000738261.png"></p>
<p>也就是说，a的φ(n)次方被n除的余数为1。</p>
<p><strong>特殊情况：</strong></p>
<p>假设正整数a与质数p互质，因为质数p的φ(p)等于p-1，则欧拉定理可以写成</p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20221017000807005.png"></p>
<h3 id="模反元素模逆元">模反元素（模逆元）</h3>
<p>如果两个正整数a和n互质，那么一定可以找到整数b，使得 ab-1
被n整除，或者说ab被n除的余数是1。</p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20220912153915183.png"></p>
<p>此时，b 就叫做 a 的模反元素。</p>
<h2 id="rsa算法">RSA算法</h2>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230127173626821.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230127173800453.png"></p>
<h3 id="随机选择两个不相等的质数-p-和-q">1.随机选择两个不相等的质数 p 和
q</h3>
<p>假设选择了61和53。</p>
<h3 id="计算-p-和-q-的乘积-n">2.计算 p 和 q 的乘积 n</h3>
<p>把61和53相乘。</p>
<blockquote>
<p>n = 61×53 = 3233</p>
</blockquote>
<p>n的长度就是密钥长度。3233写成二进制是110010100001，一共有12位，所以这个密钥就是12位。实际应用中，RSA密钥一般是1024位，重要场合则为2048位。</p>
<h3 id="计算-n-的欧拉函数-φn">3.计算 n 的欧拉函数 φ(n)</h3>
<p>根据公式：</p>
<blockquote>
<p>φ(n) = (p-1)(q-1)</p>
</blockquote>
<p>算出 φ(3233) 等于 60×52 ，即 3120 。</p>
<h3 id="随机选择一个整数-e条件是-1-e-φn-且-e-与-φn-互质">4.随机选择一个整数
e，条件是 1 &lt; e &lt; φ(n) ，且 e 与 φ(n) 互质</h3>
<p>假设随机选择了17。（实际应用中，常常选择65537。）</p>
<h3 id="计算-e-对于-φn-的模反元素-d">5.计算 e 对于 φ(n) 的模反元素
d</h3>
<p><strong>d</strong> 满足公式：</p>
<blockquote>
<p>ed ≡ 1 (mod φ(n))</p>
</blockquote>
<p>等价于：</p>
<blockquote>
<p>ed - 1 = kφ(n)</p>
</blockquote>
<p>要找到模反元素d，实质上就是对下面这个二元一次方程求解：</p>
<blockquote>
<p>ex + φ(n)y = 1</p>
</blockquote>
<p>已知 e=17，φ(n)=3120，可得方程：</p>
<blockquote>
<p>17x + 3120y = 1</p>
</blockquote>
<p>利用扩展欧几里得算法求出结果（代码参考：https://xz.aliyun.com/t/2446）</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#利用gmpy2直接求解模反元素 </span></span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="built_in">print</span>(gmpy2.invert(<span class="number">17</span>, <span class="number">3120</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#用于扩展欧几里得算法的 Python 程序</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">egcd</span> ( a , b ):</span><br><span class="line">     <span class="keyword">if</span> (b == <span class="number">0</span>):</span><br><span class="line">         <span class="keyword">return</span> <span class="number">1</span>, <span class="number">0</span>, a</span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         x , y , q = egcd( b , a % b ) <span class="comment"># q = GCD(a, b) = GCD(b, a%b)</span></span><br><span class="line">         x , y = y, ( x - (a // b) * y )</span><br><span class="line">         <span class="keyword">return</span> x, y, q </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mod_inv</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> egcd(a,b)[<span class="number">0</span>]%b <span class="comment">#求a模b得逆元</span></span><br><span class="line"><span class="built_in">print</span>(mod_inv(<span class="number">17</span>,<span class="number">3120</span>))</span><br></pre></td></tr></tbody></table></figure>
<p>可得 d = 2753 。</p>
<h3 id="将-n-和-e-封装成公钥n-和-d-封装成私钥">6.将 n 和 e 封装成公钥，n
和 d 封装成私钥</h3>
<p>在上述的例子中，n=3233，e=17，d=2753，所以公钥就是
(3233,17)，私钥就是（3233, 2753）。</p>
<h3 id="rsa算法的可靠性">7.RSA算法的可靠性</h3>
<p>上述共出现了 p 、q 、n 、φ(n) 、e 、d 这六个数字，公钥用到了 n 和 e
，其余的四个数字都不公开。最关键的是 d，一旦 d
泄露，就等于私钥泄露。</p>
<p>那么如何推导出 d ？</p>
<blockquote>
<p>（1）ed≡1 (mod φ(n))。只有知道e和φ(n)，才能算出d。</p>
<p>（2）φ(n)=(p-1)(q-1)。只有知道p和q，才能算出φ(n)。</p>
<p>（3）n=pq。只有将n因数分解，才能算出p和q。</p>
</blockquote>
<p>因此只有先计算出 p 和 q ，才有可能推导出 d 。</p>
<h3 id="加密和解密">8.加密和解密</h3>
<h4 id="加密用公钥n-e">（1）加密用公钥（n, e）</h4>
<p>假设鲍勃要向爱丽丝发送加密信息m，他就要用爱丽丝的公钥 (n,e)
对m进行加密（<strong>m为原文</strong>）。这里需要注意，m必须是整数（字符串可以取ascii值或unicode值），且m必须小于n。</p>
<p>加密的公式如下：</p>
<blockquote>
<p>m<sup>e</sup> ≡ c (mod n)</p>
</blockquote>
<p>爱丽丝的公钥是 (3233,
17)，鲍勃的m假设是65，那么可以算出下面的等式：</p>
<blockquote>
<p>6517 ≡ 2790 (mod 3233)</p>
</blockquote>
<p>于是，c等于2790，鲍勃就把2790发给了爱丽丝，即 c
是<strong>密文</strong>。</p>
<h4 id="解密用私钥n-d">（2）解密用私钥（n, d）</h4>
<p>爱丽丝拿到鲍勃发来的2790以后，就用自己的私钥(3233, 2753) 进行解密</p>
<blockquote>
<p>c<sup>d</sup> ≡ m (mod n)</p>
</blockquote>
<p>也就是说，c的d次方除以n的余数为m。现在，c等于2790，私钥是(3233,
2753)，那么，爱丽丝算出</p>
<blockquote>
<p>2790<sup>2753</sup> ≡ 65 (mod 3233)</p>
</blockquote>
<p>解得加密前的原文：65。</p>
<p>至此，"加密--解密"的整个过程全部完成。</p>
<p>由上述公式可知，如果不知道 d ，就无法通过 c 求出 m 。</p>
<h3 id="私钥解密的证明">9.私钥解密的证明</h3>
<p>详见：
https://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/24/Nmap-live-host/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/24/Nmap-live-host/" class="post-title-link" itemprop="url">Nmap Live Host Discovery</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-24 22:12:44" itemprop="dateCreated datePublished" datetime="2023-01-24T22:12:44+08:00">2023-01-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：https://tryhackme.com/room/nmap01</p>
<h2 id="introduction">Introduction</h2>
<p>这个房间主要介绍了如何使用 Nmap 查找活动主机(live
host)。用于发现活动主机的方法包括：</p>
<ul>
<li>ARP 扫描：这种扫描使用 ARP 请求来发现活动主机。</li>
<li>ICMP 扫描：这种扫描使用 ICMP 请求来标识活动主机。</li>
<li>TCP / UDP ping 扫描：此扫描将数据包发送到 TCP 端口和 UDP
端口以确定活动主机。</li>
</ul>
<p>我们还将介绍两种扫描器：<code>arp-scan</code>和<code>masscan</code>。并解释它们如何与
Nmap 发现活动主机这一部分重叠。</p>
<p>下面是 Nmap
扫描通常要经历的步骤，其中很多步骤是可选的，取决于提供的参数。</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230122092609574.png" alt="image-20230122092609574">
<figcaption aria-hidden="true">image-20230122092609574</figcaption>
</figure>
<h2 id="subnetworks子网">Subnetworks（子网）</h2>
<p><em>网段</em>
是使用共享介质连接的一组计算机，这些介质可以是以太网交换机或 WIFI
接入点。在IP网络中，<em>子网</em>
通常相当于连接在一起并配置为使用相同路由器的一个或多个网段。网段是指物理连接，而子网是指逻辑连接。</p>
<p>下图中有四个网段或子网。每个子网有它自己的 IP
地址范围，并通过路由器连接到更大的网络中。根据每个网络，可能有防火墙强制执行安全策略。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/aa787518e856e0094cb40da8399be0f3.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>如果你连接到相同的子网，你会期望你的扫描器依赖于 ARP
(地址解析协议)查询来发现活动主机。ARP 查询的目的是获取硬件地址(MAC 地址)
，这样就可以通过链路层进行通信，然而，我们可以利用这一点来推断主机是否在线。</p>
<p>如果你在网络 A 中，使用 ARP
只能发现该子网（10.1.100.0/24）中的设备。假设你已连接到与目标系统子网不同的子网。在这种情况下，扫描仪生成的所有数据包将通过默认网关（路由器）进行路由，以到达另一个子网上的系统。但是，ARP查询不会被路由，因此无法越过子网路由器。ARP
是一个链路层协议，ARP 数据包被绑定到其对应的子网。</p>
<h2 id="enumerating-targets枚举目标">Enumerating
Targets（枚举目标）</h2>
<p>在扫描之前，我们需要指定目标，一般而言，目标可以是：列表、范围或是一个子网，示例如下：</p>
<ul>
<li>list：<code>MACHINE_IP scanme.nmap.org example.com</code> 将扫描 3
个IP地址。</li>
<li>range：<code>10.11.12.15-20</code>将扫描 6
个IP地址：<code>10.11.12.15</code>、<code>10.11.12.16</code> ······
以及<code>10.11.12.20</code>。</li>
<li>subnet：<code>MACHINE_IP/30</code>将扫描 4
个IP地址。（转换为二进制来看，子网部分有 30 位，主机部分有 2
位；因此共有 2<sup>2</sup>=4 个主机即 IP 地址）</li>
</ul>
<p>还可以提供一个文件作为目标列表的输入：<code>nmap -iL list_of_hosts.txt</code></p>
<p>如果要检查 Nmap
将扫描的主机列表，则可以使用<code>nmap -sL TARGETS</code>。此选项将为你提供
Nmap 将要扫描而无需扫描的主机的详细列表；但是，Nmap
将尝试对所有目标进行反向 DNS
解析，以获取其域名。域名可能会向渗透测试者透露各种信息。（如果你不希望
Nmap 连接到DNS服务器，则可以添加<code>-n</code>。）</p>
<h2 id="discovering-live-hosts">Discovering Live Hosts</h2>
<p>让我们回顾下图所示的 TCP/IP 层，利用协议来发现活动主机：</p>
<ul>
<li>ARP（链路层）：向网段上的广播地址发送一个帧，并要求具有特定 IP
地址的计算机通过提供其MAC（硬件）地址进行响应。</li>
<li>ICMP（网络层）：ICMP有<a target="_blank" rel="noopener" href="https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml">多种类型</a>。ICMP
ping使用类型 8（Echo）和类型 0（Echo Reply）。如果你想 ping
同一子网上的系统，ARP 查询应该在 ICMP Echo之前使用。</li>
<li>TCP（传输层）：扫描仪可以向通用TCP或UDP端口发送一个特制的数据包，以检查目标是否会响应。此方法非常有效，尤其是当
ICMP Echo 被阻止时。</li>
<li>UDP（传输层）：同上。</li>
</ul>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/745e0412b319d324352c7b29863b74f4.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<h2 id="nmap-host-discovery-using-arp">Nmap Host Discovery Using
ARP</h2>
<p>Nmap 遵循以下方法来发现活动主机：</p>
<ol type="1">
<li>当特权用户试图扫描本地网络（以太网）上的目标时，Nmap使用ARP请求。特权用户是<code>root</code>用户或属于<code>sudoers</code>并可以运行<code>sudo</code>的用户。</li>
<li>当特权用户尝试扫描本地网络外的目标时，Nmap 使用 ICMP
回显请求、端口80的TCP ACK（确认）、端口443的 TCP SYN（同步）和 ICMP
时间戳请求。</li>
<li>当非特权用户试图扫描本地网络之外的目标时，Nmap 采用 TCP
三次握手方式，将 SYN 数据包发送到 80 和 443 端口。</li>
</ol>
<p>默认情况下，Nmap 使用 ping
扫描来查找活动主机，并且只扫描活动主机。如果希望使用 Nmap
在不扫描系统端口的情况下发现在线主机，可以使用<code>nmap -sn TARGETS</code>。</p>
<p>只有当你和目标系统在同一子网中时，ARP
扫描才可能使用。在以太网（802.3）和
WiFi（802.11）上，你需要知道目标系统的 MAC
地址才能够与之通信。MAC地址是链路层报头所必需的；报头包含源 MAC
地址和目标 MAC 地址以及其他字段。为了获得 MAC 地址，操作系统会发送 ARP
查询。ARP 查询仅在目标与你所在的子网相同时有效，即在相同的以太网或 WiFi
上。在对本地网络进行 Nmap 扫描期间，应该会看到许多 ARP 查询。如果您希望
Nmap 只执行 ARP
扫描而不扫描端口，那么可以使用<code>Nmap -PR -sn TARGETS</code>，其中<code>-PR</code>表示你只需要进行
ARP 扫描。下面的示例显示了 Nmap 使用 ARP
进行主机查找而不进行端口扫描。运行<code>nmap -PR -sn MACHINE_IP/24</code>来发现与目标机器在同一子网上的所有系统。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PR -sn 10.10.210.6/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.60 ( https://nmap.org ) at 2021-09-02 07:12 BST</span><br><span class="line">Nmap scan report for ip-10-10-210-75.eu-west-1.compute.internal (10.10.210.75)</span><br><span class="line">Host is up (0.00013s latency).</span><br><span class="line">MAC Address: 02:83:75:3A:F2:89 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-100.eu-west-1.compute.internal (10.10.210.100)</span><br><span class="line">Host is up (-0.100s latency).</span><br><span class="line">MAC Address: 02:63:D0:1B:2D:CD (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-165.eu-west-1.compute.internal (10.10.210.165)</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">MAC Address: 02:59:79:4F:17:B7 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-210-6.eu-west-1.compute.internal (10.10.210.6)</span><br><span class="line">Host is up.</span><br><span class="line">Nmap done: 256 IP addresses (4 hosts up) scanned in 3.12 seconds</span><br></pre></td></tr></tbody></table></figure>
<p>在本例中，AtackBox 的 IP 地址是10.10.210.6，它使用 ARP
请求来发现同一子网上的活动主机。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/f0ce4cd34b827f529255c5c73bb909d1.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>说到 ARP 扫描，我们应该提到一个围绕 ARP
查询构建的扫描器：<code>arp-scan</code>；它提供了许多自定义扫描的选项。有关详细信息，请访问
<a target="_blank" rel="noopener" href="http://www.royhills.co.uk/wiki/index.php/Main_Page">arp-scanner
wiki</a>。一个常见的选择是 <code>arp-scan --localnet</code> 或者简单的
<code>arp-scan -l</code>。这个命令将发送 ARP 查询到本地网络上所有有效的
IP
地址。此外，如果你的系统有多个接口，并且你有兴趣发现其中一个上的活动主机，你可以使用<code>-I</code>
指定具体接口，例如，<code>sudo arp-scan -I eth0 -l</code>
将向<code>eth0</code>接口上的所有有效IP地址发送 ARP 查询。</p>
<p>在下面的示例中，我们使用<code>arp-scan ATTACKBOX_IP/24</code>扫描了
AtackBox 的子网。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo arp-scan 10.10.210.6/24</span><br><span class="line">Interface: eth0, datalink type: EN10MB (Ethernet)</span><br><span class="line">WARNING: host part of 10.10.210.6/24 is non-zero</span><br><span class="line">Starting arp-scan 1.9 with 256 hosts (http://www.nta-monitor.com/tools/arp-scan/)</span><br><span class="line">10.10.210.75	02:83:75:3a:f2:89	(Unknown)</span><br><span class="line">10.10.210.100	02:63:d0:1b:2d:cd	(Unknown)</span><br><span class="line">10.10.210.165	02:59:79:4f:17:b7	(Unknown)</span><br><span class="line"></span><br><span class="line">4 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.9: 256 hosts scanned in 2.726 seconds (93.91 hosts/sec). 3 responded</span><br></pre></td></tr></tbody></table></figure>
<h2 id="nmap-host-discovery-using-icmp">Nmap Host Discovery Using
ICMP</h2>
<p>我们可以 ping 目标网络上的每个 IP 地址，看看谁用 ping reply (ICMP
Type 0) 来响应我们的<code>ping</code> (ICMP Type 8/Echo)
请求。尽管这将是最直接的方法，但它并不总是可靠的。许多防火墙会阻止 ICMP
echo ；Windows 配置了一个主机防火墙，默认情况下阻止 ICMP echo
请求。请记住，如果目标位于相同的子网上，则 ARP 查询将先于 ICMP
请求。</p>
<h3 id="pe">-PE</h3>
<p>若要使用 ICMP echo request 来发现活动主机，请添加选项
<code>-PE</code>。(记住，如果你不想进行端口扫描，请添加
<code>-sn</code>。)如下图所示，ICMP echo 扫描通过发送 ICMP echo request
来工作，并期望目标使用 ICMP echo reply 进行应答。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/25fb5fd5d2009cf69d7aae40e8fde2ec.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>在下面的示例中，我们使用<code>nmap -PE -sn MACHINE_IP/24</code>扫描了目标所在的子网。此扫描将向子网上的每个
IP 地址发送 ICMP echo
数据包。下面的输出显示了使用<code>sudo nmap -PE -sn MACHINE_IP/24</code>扫描虚拟机的
C 类子网的结果。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PE -sn 10.10.68.220/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.60 ( https://nmap.org ) at 2021-09-02 10:16 BST</span><br><span class="line">Nmap scan report for ip-10-10-68-50.eu-west-1.compute.internal (10.10.68.50)</span><br><span class="line">Host is up (0.00017s latency).</span><br><span class="line">MAC Address: 02:95:36:71:5B:87 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-52.eu-west-1.compute.internal (10.10.68.52)</span><br><span class="line">Host is up (0.00017s latency).</span><br><span class="line">MAC Address: 02:48:E8:BF:78:E7 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-77.eu-west-1.compute.internal (10.10.68.77)</span><br><span class="line">Host is up (-0.100s latency).</span><br><span class="line">MAC Address: 02:0F:0A:1D:76:35 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-110.eu-west-1.compute.internal (10.10.68.110)</span><br><span class="line">Host is up (-0.10s latency).</span><br><span class="line">MAC Address: 02:6B:50:E9:C2:91 (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-140.eu-west-1.compute.internal (10.10.68.140)</span><br><span class="line">Host is up (0.00021s latency).</span><br><span class="line">MAC Address: 02:58:59:63:0B:6B (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-142.eu-west-1.compute.internal (10.10.68.142)</span><br><span class="line">Host is up (0.00016s latency).</span><br><span class="line">MAC Address: 02:C6:41:51:0A:0F (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-220.eu-west-1.compute.internal (10.10.68.220)</span><br><span class="line">Host is up (0.00026s latency).</span><br><span class="line">MAC Address: 02:25:3F:DB:EE:0B (Unknown)</span><br><span class="line">Nmap scan report for ip-10-10-68-222.eu-west-1.compute.internal (10.10.68.222)</span><br><span class="line">Host is up (0.00025s latency).</span><br><span class="line">MAC Address: 02:28:B1:2E:B0:1B (Unknown)</span><br><span class="line">Nmap done: 256 IP addresses (8 hosts up) scanned in 2.11 seconds</span><br></pre></td></tr></tbody></table></figure>
<p>扫描输出显示八台主机已启动；此外，还显示了它们的MAC地址。一般来说，除非目标与我们的系统位于同一子网，否则我们没必要了解目标的
MAC 地址。上面的输出表明，Nmap不需要发送 ICMP 数据包，因为它根据收到的
ARP 响应确认这些主机已启动。</p>
<p>我们将重复上面的扫描;
然而，这一次，我们将从属于其他子网的系统进行扫描。结果是相似的，但没有
MAC 地址。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PE -sn 10.10.68.220/24</span><br><span class="line"></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2021-09-02 12:16 EEST</span><br><span class="line">Nmap scan report for 10.10.68.50</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.52</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.77</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.110</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.140</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.142</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.220</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.222</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap done: 256 IP addresses (8 hosts up) scanned in 8.26 seconds</span><br></pre></td></tr></tbody></table></figure>
<h3 id="pp">-PP</h3>
<p>因为 ICMP echo 请求往往会被阻塞，所以你还可以考虑使用 ICMP 时间戳或
ICMP 地址掩码请求来判断系统是否在线。Nmap 使用时间戳请求(ICMP Type
13)并检查它是否将获得时间戳应答(ICMP Type
14)。添加<code>-PP</code>选项告诉 Nmap 使用 ICMP 时间戳请求。</p>
<h3 id="pm">-PM</h3>
<p>类似地，Nmap 通过添加<code>-PM</code>选项来使用地址掩码查询（ICMP
Type
17）。注意：该请求可能会被目标系统或防火墙过滤掉，这时，我们应该考虑使用另一种方法。</p>
<h2 id="nmap-host-discovery-using-tcp-and-udp">Nmap Host Discovery Using
TCP and UDP</h2>
<h3 id="tcp-syn-ping"><strong>TCP SYN Ping</strong></h3>
<p>我们可以将设置了SYN（同步）标志的数据包发送到 TCP 端口，默认情况下为
80 ，并等待响应。开放端口应回复 SYN/ACK （确认）；关闭的端口将导致
RST（重置）。在这种情况下，我们检查是否会得到任何回应，以推断主机是否启动。端口的特定状态在这里并不重要。下图提醒了
TCP 3次握手通常如何工作。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/23e7f481f78de8d3e89ef845b747002d.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>TCP SYN ping
使用方法：<code>-PS</code>选项。<code>-PS</code>后可添加端口号、范围、列表或它们的组合，例如，<code>-PS21</code>将会以
21 号端口为目标，<code>-PS21-25</code>将会以端口 21 、22 、23 、24 、25
为目标。</p>
<h3 id="tcp-ack-ping"><strong>TCP ACK Ping</strong></h3>
<p>默认情况下，使用端口 80 。语法类似于 TCP SYN ping
。<code>-PA</code>后面应该是端口号、范围、列表或它们的组合。例如，<code>-PA21</code>、<code>-PA21-25</code>和<code>-PA80,443,8080</code>。如果未指定端口，将使用端口
80 。你必须作为特权用户运行 Nmap
才能完成此任务。如果你以非特权用户身份尝试，Nmap 将尝试进行3次握手。</p>
<p>下图显示了任何带有 ACK 标志的 TCP 数据包都应该返回 设置了 RST 标志的
TCP 数据包。由于带有 ACK 标志的 TCP 数据包不是任何 正在进行的连接
的一部分，因此目标使用设置的 RST
标志进行响应。预期响应用于检测目标主机是否已启动。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/db5ab44a8c700c4ab0603e85e456040d.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>下面是一个示例，运行<code>sudo nmap -PA -sn MACHINE_IP/24</code>以发现在线的主机。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ sudo nmap -PA -sn 10.10.68.220/24</span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2021-09-02 13:46 EEST</span><br><span class="line">Nmap scan report for 10.10.68.52</span><br><span class="line">Host is up (0.11s latency).</span><br><span class="line">Nmap scan report for 10.10.68.121</span><br><span class="line">Host is up (0.12s latency).</span><br><span class="line">Nmap scan report for 10.10.68.125</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap scan report for 10.10.68.134</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap scan report for 10.10.68.220</span><br><span class="line">Host is up (0.10s latency).</span><br><span class="line">Nmap done: 256 IP addresses (5 hosts up) scanned in 29.89 seconds</span><br></pre></td></tr></tbody></table></figure>
<h3 id="udp-ping"><strong>UDP Ping</strong></h3>
<p>与 TCP SYN ping 相反，将 UDP
数据包发送到开放端口不会有任何答复。但是，如果我们向一个关闭的 UDP
端口发送一个 UDP 数据包，我们希望得到一个 ICMP
端口无法访问的数据包；这表明目标系统已经启动并可用。Nmap
使用<code>-PU</code>来进行 UDP ping 。</p>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/1b827ef60c39619e281c4ca51a6d57b6.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<figure>
<img src="https://tryhackme-images.s3.amazonaws.com/user-uploads/5f04259cf9bf5b57aed2c476/room-content/c8b2d403667487322058619e561186d2.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<h3 id="masscan"><strong>Masscan</strong></h3>
<p>另外，Masscan
使用类似的方法来发现可用的系统。然而，为了快速完成网络扫描，Masscan
在数据包生成速度方面非常积极。语法与 Nmap 非常相似：<code>-p</code>
后面可以跟一个端口号、列表或范围。例如：</p>
<ul>
<li><code>masscan MACHINE_IP/24 -p443</code></li>
<li><code>masscan MACHINE_IP/24 -p80,443</code></li>
<li><code>masscan MACHINE_IP/24 -p22-25</code></li>
<li><code>masscan MACHINE_IP/24 ‐‐top-ports 100</code></li>
</ul>
<h2 id="using-reverse-dns-lookup反向dns查找">Using Reverse-DNS
Lookup（反向DNS查找）</h2>
<p>Nmap 的默认行为是使用反向 DNS
查找在线主机。因为主机名可以揭示很多东西，这可能是一个有用的步骤。但是，如果不希望发送此类
DNS 查询，可以使用 <code>-n</code> 跳过此步骤。</p>
<p>默认情况下，Nmap 将查找在线主机；但是，你可以使用选项 <code>-R</code>
来查询 DNS 服务器，即使是针对脱机主机。如果要使用特定的 DNS
服务器，可以添加<code>--dns-servers DNS_SERVER</code>选项。</p>
<h2 id="总结">总结</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Scan Type</th>
<th style="text-align: center;">Example Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">ARP Scan</td>
<td style="text-align: center;"><code>sudo nmap -PR -sn MACHINE_IP/24</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">ICMP Echo Scan</td>
<td style="text-align: center;"><code>sudo nmap -PE -sn MACHINE_IP/24</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">ICMP Timestamp Scan</td>
<td style="text-align: center;"><code>sudo nmap -PP -sn MACHINE_IP/24</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">ICMP Address Mask Scan</td>
<td style="text-align: center;"><code>sudo nmap -PM -sn MACHINE_IP/24</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">TCP SYN Ping Scan</td>
<td style="text-align: center;"><code>sudo nmap -PS22,80,443 -sn MACHINE_IP/30</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">TCP ACK Ping Scan</td>
<td style="text-align: center;"><code>sudo nmap -PA22,80,443 -sn MACHINE_IP/30</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">UDP Ping Scan</td>
<td style="text-align: center;"><code>sudo nmap -PU53,161,162 -sn MACHINE_IP/30</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Option</th>
<th style="text-align: center;">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>-n</code></td>
<td style="text-align: center;">no DNS lookup</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>-R</code></td>
<td style="text-align: center;">reverse-DNS lookup for all hosts</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>-sn</code></td>
<td style="text-align: center;">host discovery only</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/19/Active-Reconnaissance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/19/Active-Reconnaissance/" class="post-title-link" itemprop="url">Active Reconnaissance(主动侦察)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-19 16:16:32" itemprop="dateCreated datePublished" datetime="2023-01-19T16:16:32+08:00">2023-01-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：https://tryhackme.com/room/activerecon</p>
<h2 id="introduction">Introduction</h2>
<p>本文中，我们集中在主动侦察和相关的基本工具。我们学习使用网络浏览器来收集关于我们目标的更多信息。此外，我们还将讨论如何使用
<code>ping</code>、 <code>traceroute</code>、 <code>telnet</code> 和
<code>nc</code> 等简单工具来收集有关网络、系统和服务的信息。</p>
<p>主动侦察需要你与目标进行某种接触。这种接触可以是一个电话或访问目标公司，以某种借口收集更多信息，通常作为社会工程的一部分。或者，它可以是到目标系统的直接连接，无论是访问他们的网站还是检查他们的防火墙是否打开了
SSH
端口。把它想象成你正在仔细检查窗户和门锁。因此，在获得客户签署的合法授权之前，切记不要从事主动侦察工作。</p>
<p>主动侦察从与目标机器的直接连接开始。任何这样的连接都可能在日志中留下显示客户端
IP
地址、连接时间和连接持续时间等信息。然而，并非所有的连接都是可疑的。可以让你的活动侦察显示为常规客户端活动。考虑网页浏览，没有人会怀疑一个浏览器连接到目标网络服务器和其他数百个合法用户。当你作为红队(攻击方)的一员工作时，你可以利用这些技巧，而不要惊动蓝队(防守方)。</p>
<h2 id="web-browser">Web Browser</h2>
<p>Web
浏览器是一个很方便的工具，尤其是在所有的系统上都可以使用。你可以通过几种方式使用
Web 浏览器来收集目标的信息。</p>
<p>在传输层上，浏览器连接如下：</p>
<ul>
<li>通过 HTTP 访问网站时，默认的 TCP 端口为 80</li>
<li>通过 HTTPS 访问网站时，默认的 TCP 端口为 443</li>
</ul>
<p>由于 80 和 443 是 HTTP 和 HTTPS 的默认端口，Web
浏览器不会在地址栏中显示它们。但是，可以使用自定义端口访问服务。例如，
https://127.0.0.1:8834/ 将通过 HTTPS 协议连接到端口8834的
127.0.0.1(localhost)。如果有一个 HTTPS
服务器监听该端口，我们将收到一个网页。</p>
<p>浏览网页时，你可以在 PC 上按 <code>Ctrl + Shift + I</code>，在
Firefox 上打开 开发者工具。类似的快捷方式也可以让你打开谷歌 Chrome 或
Chromium
的开发者工具。开发人员工具允许你检查浏览器已经接收并与远程服务器交换的许多内容。例如，您可以查看甚至修改
JavaScript (JS)文件，检查系统上的 cookie
，并查看站点内容的文件夹结构。</p>
<h2 id="ping">Ping</h2>
<p>Ping 属于协议 ICMP (Internet Control Message Protocol)的范畴。ICMP
支持许多类型的查询，但是我们这里主要关注 ping (ICMP echo/type 8)和 ping
reply (ICMP echo reply/type 0)。Ping
的主要目的是检查你是否能够到达远程系统，以及远程系统是否能够返回。换句话说，最初，这是用来检查网络连接性的;
然而，我们更感兴趣的是它的其他用途: 检查远程系统是否在线。</p>
<p>简单地说，ping
命令向远程系统发送数据包，远程系统回复。通过这种方式，你可以判断远程系统是否已联机，以及网络是否正在两个系统之间工作。</p>
<p>更具体的定义：ping 是一个将 ICMP Echo
数据包发送到远程系统的命令。如果远程系统在线，并且 ping
数据包被正确路由而且没有被任何防火墙阻塞，远程系统应该发回一个 ICMP Echo
应答。类似地，如果路由正确并且没有被任何防火墙阻塞，ping
应答会到达发送方系统。</p>
<p>这种命令的目的是在我们花时间进行更详细的扫描以发现正在运行的操作系统和服务之前，确保目标系统处于联机状态。</p>
<p>假设目标 IP
是<code>10.10.120.159</code>，在攻击方的终端上使用<code>ping 10.10.120.159</code>或者<code>ping HOSTNAME</code>，在后者中，系统需要在发送
ping 数据包之前将 <code>HOSTNAME</code> 解析为一个 IP
地址。如果你没有指定具体的次数，ping
将会一直重复发送-返回数据，使用<code>CTRL + c</code>可以停止数据的发送和接收。因此，如果你只想发送
10
个数据包，可以使用<code>ping -c 10 10.10.120.159</code>（Linux系统），或者使用<code>ping -n 10 10.10.120.159</code>（Windows系统）。</p>
<p>在下面的示例中，我们将数据包的总数指定为5。从 AttackBox
的终端，我们开始ping
<code>10.10.120.159</code>。我们了解到<code>10.10.120.159</code>已启动，并且未阻止ICMP回显请求。此外，数据包路由上的任何防火墙和路由器也没有阻止
ICMP 回显请求。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">user@AttackBox$ ping -c 5 10.10.120.159</span><br><span class="line">PING 10.10.120.159 (MACHINE_IP) 56(84) bytes of data.</span><br><span class="line">64 bytes from MACHINE_IP: icmp_seq=1 ttl=64 time=0.636 ms</span><br><span class="line">64 bytes from MACHINE_IP: icmp_seq=2 ttl=64 time=0.483 ms</span><br><span class="line">64 bytes from MACHINE_IP: icmp_seq=3 ttl=64 time=0.396 ms</span><br><span class="line">64 bytes from MACHINE_IP: icmp_seq=4 ttl=64 time=0.416 ms</span><br><span class="line">64 bytes from MACHINE_IP: icmp_seq=5 ttl=64 time=0.445 ms</span><br><span class="line"></span><br><span class="line">--- MACHINE_IP ping statistics ---</span><br><span class="line">5 packets transmitted, 5 received, 0% packet loss, time 4097ms</span><br><span class="line">rtt min/avg/max/mdev = 0.396/0.475/0.636/0.086 ms</span><br></pre></td></tr></tbody></table></figure>
<p>在上面的示例中，我们清楚地看到了目标系统正在响应。Ping
输出表明它处于联机状态并且可访问。我们传输了五个数据包，并且收到了五个答复。我们注意到，平均而言，回复到达我们的系统需要
0.475ms（毫秒），最大值为 0.636ms。</p>
<p>从渗透测试的角度来看，我们将尝试发现有关此目标的更多信息。我们将尝试尽可能多地了解哪些端口是打开的以及正在运行哪些服务。</p>
<p>一般来说，当我们没有收到 ping 回复时，有以下解释：</p>
<ul>
<li>目标计算机没有响应; 可能仍在启动或关闭，或者操作系统已经崩溃。</li>
<li>它与网络断开连接，或者路径上有一个故障网络设备。</li>
<li>防火墙被配置为阻止这样的数据包。防火墙可能是在系统本身上运行的一个软件，或者是一个单独的网络设备。请注意，MS
Windows 防火墙默认阻止 ping。</li>
<li>你的系统已从网络中拔出。</li>
</ul>
<h2 id="traceroute">Traceroute</h2>
<p>顾名思义，traceroute
命令跟踪数据包从你的系统到另一台主机的路由。traceroute
的目的是查找数据包从系统到目标主机时所经过的路由器或每一跳(hop)的IP地址。该命令还显示了两个系统之间的路由器数量。它很有用，因为它指示了系统和目标主机之间的跳数（路由器）。然而，请注意，由于许多路由器使用适应网络变化的动态路由协议，数据包所采用的路由可能会发生变化。</p>
<p>在 Linux 和 MacOS
上，要使用的命令是<code>traceroute 10.10.120.159</code>，而在 MS Windows
上，它是<code>tracert 10.10.120.159</code>。<code>traceroute</code>试图从你的系统到目标系统的路径上发现路由器。</p>
<p>没有直接的方法来发现从你的系统到目标系统的路径。我们依靠ICMP“欺骗”路由器，使其暴露IP地址。我们可以通过在IP报头字段中使用一个小的生存时间（TTL）来实现这一点。虽然
TTL 中的 T
代表时间，但TTL表示数据包在丢弃之前可以通过的最大路由器/跳数；TTL
不是最大时间单位数。当路由器接收到一个数据包时，它将TTL减一，然后再将其传递给下一个路由器。下图显示，每次IP数据包通过路由器时，其TTL值都会减1。最初，它使系统的TTL值为64；它通过4个路由器后到达
TTL 值为60的目标系统。</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230119110311465.png" alt="image-20230119110311465">
<figcaption aria-hidden="true">image-20230119110311465</figcaption>
</figure>
<p>但是，如果 TTL 达到0，它将被丢弃，并且超过 ICMP
的生存时间将被发送给原始发送方。在下图中，系统在将 TTL
发送到路由器之前将其设置为1。路径上的第一个路由器将 TTL 减少 1 ，导致
TTL 为 0 。因此，此路由器将丢弃该数据包并发送 ICMP
传输超时的报错信息。注意，有些路由器被配置为在丢弃数据包时不发送这样的
ICMP 消息。</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230119110952069.png" alt="image-20230119110952069">
<figcaption aria-hidden="true">image-20230119110952069</figcaption>
</figure>
<p>在 Linux 中，<code>traceroute</code>将在 TTL 为 1 的 IP 分组内发送
UDP 数据报，因此，当它到达第一个路由器时，TTL 减为 0 ，并发送 ICMP
传输超时信息。因此，TTL = 1 将返回到达的第一个路由器IP。然后发送 TTL = 2
的分组，该分组将在第二个路由器处丢弃，以此继续下去。</p>
<p>在下面的示例中，我们从 TryHackMe 的 AtackBox 运行相同的命令
<code>traceroute tryhackme.com</code>。我们注意到，不同的运行可能导致分组采用不同的路由。</p>
<p><strong>Traceroute A</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">user@AttackBox$ traceroute tryhackme.com</span><br><span class="line">traceroute to tryhackme.com (172.67.69.208), 30 hops max, 60 byte packets</span><br><span class="line"> 1  ec2-3-248-240-5.eu-west-1.compute.amazonaws.com (3.248.240.5)  2.663 ms * ec2-3-248-240-13.eu-west-1.compute.amazonaws.com (3.248.240.13)  7.468 ms</span><br><span class="line"> 2  100.66.8.86 (100.66.8.86)  43.231 ms 100.65.21.64 (100.65.21.64)  18.886 ms 100.65.22.160 (100.65.22.160)  14.556 ms</span><br><span class="line"> 3  * 100.66.16.176 (100.66.16.176)  8.006 ms *</span><br><span class="line"> 4  100.66.11.34 (100.66.11.34)  17.401 ms 100.66.10.14 (100.66.10.14)  23.614 ms 100.66.19.236 (100.66.19.236)  17.524 ms</span><br><span class="line"> 5  100.66.7.35 (100.66.7.35)  12.808 ms 100.66.6.109 (100.66.6.109)  14.791 ms *</span><br><span class="line"> 6  100.65.14.131 (100.65.14.131)  1.026 ms 100.66.5.189 (100.66.5.189)  19.246 ms 100.66.5.243 (100.66.5.243)  19.805 ms</span><br><span class="line"> 7  100.65.13.143 (100.65.13.143)  14.254 ms 100.95.18.131 (100.95.18.131)  0.944 ms 100.95.18.129 (100.95.18.129)  0.778 ms</span><br><span class="line"> 8  100.95.2.143 (100.95.2.143)  0.680 ms 100.100.4.46 (100.100.4.46)  1.392 ms 100.95.18.143 (100.95.18.143)  0.878 ms</span><br><span class="line"> 9  100.100.20.76 (100.100.20.76)  7.819 ms 100.92.11.36 (100.92.11.36)  18.669 ms 100.100.20.26 (100.100.20.26)  0.842 ms</span><br><span class="line">10  100.92.11.112 (100.92.11.112)  17.852 ms * 100.92.11.158 (100.92.11.158)  16.687 ms</span><br><span class="line">11  100.92.211.82 (100.92.211.82)  19.713 ms 100.92.0.126 (100.92.0.126)  18.603 ms 52.93.112.182 (52.93.112.182)  17.738 ms</span><br><span class="line">12  99.83.69.207 (99.83.69.207)  17.603 ms  15.827 ms  17.351 ms</span><br><span class="line">13  100.92.9.83 (100.92.9.83)  17.894 ms 100.92.79.136 (100.92.79.136)  21.250 ms 100.92.9.118 (100.92.9.118)  18.166 ms</span><br><span class="line">14  172.67.69.208 (172.67.69.208)  17.976 ms  16.945 ms 100.92.9.3 (100.92.9.3)  17.709 ms</span><br></pre></td></tr></tbody></table></figure>
<p>在上面的 traceroute 输出中，我们有14个编号的行;
每一行代表一个路由器/跳。我们的系统发送三个 TTL
设置为1的数据包，然后发送三个 TTL
设置为2的数据包，依此类推。根据不同的网络拓扑，我们可能会收到多达3个不同路由器的回复，这取决于数据包所采用的路由。考虑第12行，列出
IP 地址的第12个路由器丢弃了数据包三次，并发送了 ICMP
传输超时的消息。第12行<code>99.83.69.207 (99.83.69.207)  17.603 ms  15.827 ms  17.351 ms</code>
显示每个回复到达我们系统的时间(毫秒)。</p>
<p>另一方面，我们可以看到，我们在第三行只收到一个单一的答复。<code>3 * 100.66.16.176 (100.66.16.176) 8.006 ms *</code>中的两个<code>*</code>表明我们的系统有两条预期超时的消息未收到。</p>
<p><strong>Traceroute B</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">user@AttackBox$ traceroute tryhackme.com</span><br><span class="line">traceroute to tryhackme.com (104.26.11.229), 30 hops max, 60 byte packets</span><br><span class="line"> 1  ec2-79-125-1-9.eu-west-1.compute.amazonaws.com (79.125.1.9)  1.475 ms * ec2-3-248-240-31.eu-west-1.compute.amazonaws.com (3.248.240.31)  9.456 ms</span><br><span class="line"> 2  100.65.20.160 (100.65.20.160)  16.575 ms 100.66.8.226 (100.66.8.226)  23.241 ms 100.65.23.192 (100.65.23.192)  22.267 ms</span><br><span class="line"> 3  100.66.16.50 (100.66.16.50)  2.777 ms 100.66.11.34 (100.66.11.34)  22.288 ms 100.66.16.28 (100.66.16.28)  4.421 ms</span><br><span class="line"> 4  100.66.6.47 (100.66.6.47)  17.264 ms 100.66.7.161 (100.66.7.161)  39.562 ms 100.66.10.198 (100.66.10.198)  15.958 ms</span><br><span class="line"> 5  100.66.5.123 (100.66.5.123)  20.099 ms 100.66.7.239 (100.66.7.239)  19.253 ms 100.66.5.59 (100.66.5.59)  15.397 ms</span><br><span class="line"> 6  * 100.66.5.223 (100.66.5.223)  16.172 ms 100.65.15.135 (100.65.15.135)  0.424 ms</span><br><span class="line"> 7  100.65.12.135 (100.65.12.135)  0.390 ms 100.65.12.15 (100.65.12.15)  1.045 ms 100.65.14.15 (100.65.14.15)  1.036 ms</span><br><span class="line"> 8  100.100.4.16 (100.100.4.16)  0.482 ms 100.100.20.122 (100.100.20.122)  0.795 ms 100.95.2.143 (100.95.2.143)  0.827 ms</span><br><span class="line"> 9  100.100.20.86 (100.100.20.86)  0.442 ms 100.100.4.78 (100.100.4.78)  0.347 ms 100.100.20.20 (100.100.20.20)  1.388 ms</span><br><span class="line">10  100.92.212.20 (100.92.212.20)  11.611 ms 100.92.11.54 (100.92.11.54)  12.675 ms 100.92.11.56 (100.92.11.56)  10.835 ms</span><br><span class="line">11  100.92.6.52 (100.92.6.52)  11.427 ms 100.92.6.50 (100.92.6.50)  11.033 ms 100.92.210.50 (100.92.210.50)  10.551 ms</span><br><span class="line">12  100.92.210.139 (100.92.210.139)  10.026 ms 100.92.6.13 (100.92.6.13)  14.586 ms 100.92.210.69 (100.92.210.69)  12.032 ms</span><br><span class="line">13  100.92.79.12 (100.92.79.12)  12.011 ms 100.92.79.68 (100.92.79.68)  11.318 ms 100.92.80.84 (100.92.80.84)  10.496 ms</span><br><span class="line">14  100.92.9.27 (100.92.9.27)  11.354 ms 100.92.80.31 (100.92.80.31)  13.000 ms 52.93.135.125 (52.93.135.125)  11.412 ms</span><br><span class="line">15  150.222.241.85 (150.222.241.85)  9.660 ms 52.93.135.81 (52.93.135.81)  10.941 ms 150.222.241.87 (150.222.241.87)  16.543 ms</span><br><span class="line">16  100.92.228.102 (100.92.228.102)  15.168 ms 100.92.227.41 (100.92.227.41)  10.134 ms 100.92.227.52 (100.92.227.52)  11.756 ms</span><br><span class="line">17  100.92.232.111 (100.92.232.111)  10.589 ms 100.92.231.69 (100.92.231.69)  16.664 ms 100.92.232.37 (100.92.232.37)  13.089 ms</span><br><span class="line">18  100.91.205.140 (100.91.205.140)  11.551 ms 100.91.201.62 (100.91.201.62)  10.246 ms 100.91.201.36 (100.91.201.36)  11.368 ms</span><br><span class="line">19  100.91.205.79 (100.91.205.79)  11.112 ms 100.91.205.83 (100.91.205.83)  11.040 ms 100.91.205.33 (100.91.205.33)  10.114 ms</span><br><span class="line">20  100.91.211.45 (100.91.211.45)  9.486 ms 100.91.211.79 (100.91.211.79)  13.693 ms 100.91.211.47 (100.91.211.47)  13.619 ms</span><br><span class="line">21  100.100.6.81 (100.100.6.81)  11.522 ms 100.100.68.70 (100.100.68.70)  10.181 ms 100.100.6.21 (100.100.6.21)  11.687 ms</span><br><span class="line">22  100.100.65.131 (100.100.65.131)  10.371 ms 100.100.92.6 (100.100.92.6)  10.939 ms 100.100.65.70 (100.100.65.70)  23.703 ms</span><br><span class="line">23  100.100.2.74 (100.100.2.74)  15.317 ms 100.100.66.17 (100.100.66.17)  11.492 ms 100.100.88.67 (100.100.88.67)  35.312 ms</span><br><span class="line">24  100.100.16.16 (100.100.16.16)  19.155 ms 100.100.16.28 (100.100.16.28)  19.147 ms 100.100.2.68 (100.100.2.68)  13.718 ms</span><br><span class="line">25  99.83.89.19 (99.83.89.19)  28.929 ms *  21.790 ms</span><br><span class="line">26  104.26.11.229 (104.26.11.229)  11.070 ms  11.058 ms  11.982 ms</span><br></pre></td></tr></tbody></table></figure>
<p>在 traceroute
程序的第二次运行中，我们注意到这次数据包采用了更长的路由，通过了26个路由器。如果你运行
traceroute
追踪你所在网络中某个系统的路由，则该路由不太可能发生更改。然而，当数据包需要通过我们网络之外的其他路由器时，我们不能指望路由保持不变。</p>
<p>总而言之，我们可以注意到以下几点:</p>
<ul>
<li>系统和目标系统之间的跳/路由器的数量取决于你运行 traceroute
的时间。不能保证你的数据包总是遵循相同的路由，即使你在相同的网络上，或者你在很短的时间内重复
traceroute 命令。</li>
<li>一些路由器返回公共 IP
地址。你可以根据预期渗透测试的范围来检查其中的一些路由器。</li>
<li>一些路由器不会回复。</li>
</ul>
<h2 id="telnet">Telnet</h2>
<p>TELNET（Teletype
Network）协议于1969年开发，通过命令行界面（CLI）与远程系统通信。因此，命令<code>telnet</code>使用
TELNET 协议进行远程管理。Telnet 使用的默认端口是 23
。从安全角度来看，<code>telnet</code>以明文形式发送所有数据，包括用户名和密码。通过明文发送，任何人都可以很容易地访问通信信道，从而窃取登录凭据。安全的替代方案是
SSH(Secure SHell) 协议。</p>
<p>然而，telnet 客户端由于其简单性，可以用于其他目的。由于 telnet
客户端依赖于 TCP 协议，你可以使用 Telnet 连接到任何服务并获取其 banner
。使用 <code>telnet 10.10.120.159 PORT</code>，你可以连接到在 TCP
上运行的任何服务，甚至可以交换一些消息，除非它使用加密。</p>
<p>假设我们希望发现关于 web 服务器的更多信息，监听端口 80 。我们在 80
端口连接到服务器，然后使用 HTTP 协议进行通信。你不需要深入研究 HTTP
协议; 你只需要<strong>发出</strong>
<code>GET / HTTP/1.1</code>。要指定默认索引页之外的其他内容，可以发出
<code>GET /page.html HTTP/1.1</code>请求，它将请求
<code>page.html</code>。我们还向远程 Web 服务器指定希望使用 HTTP
版本1.1进行通信。要获得有效的响应，你需要为主机输入一些值（<code>host: example</code>
），然后<strong>按回车键两次</strong>。执行这些步骤将提供所请求的索引页。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ telnet 10.10.120.159 80</span><br><span class="line">Trying 10.10.120.159...</span><br><span class="line">Connected to MACHINE_IP.</span><br><span class="line">Escape character is <span class="string">'^]'</span>.</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line">host: telnet</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.6.2</span><br><span class="line">Date: Tue, 17 Aug 2021 11:13:25 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 867</span><br><span class="line">Last-Modified: Tue, 17 Aug 2021 11:12:16 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: <span class="string">"611b9990-363"</span></span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>
<p>我们发现了已安装的 Web 服务器
的类型和版本：<code>Server: nginx/1.6.2</code>。在本例中，我们与 Web
服务器进行通信，因此使用了基本的 HTTP
命令。如果连接到邮件服务器，则需要使用基于协议的正确命令，如 SMTP 和
POP3 。</p>
<h2 id="netcat">Netcat</h2>
<p>Netcat（<code>nc</code>）对于渗透测试具有很高的价值。Netcat支持 TCP
和 UDP
协议。它可以充当连接到侦听端口的客户端；或者，它可以充当侦听(你选择的)端口的服务器。</p>
<p>首先，与 Telnet
的使用方法类似，你可以使用<code>nc MACHINE_IP PORT</code>来获取 banner
信息，需要注意的是，你可能需要在 GET 行之后按 SHIFT + ENTER 。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pentester@TryHackMe$ nc 10.10.221.57 80</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line">host: netcat</span><br><span class="line"></span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.6.2</span><br><span class="line">Date: Tue, 17 Aug 2021 11:39:49 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 867</span><br><span class="line">Last-Modified: Tue, 17 Aug 2021 11:12:16 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: <span class="string">"611b9990-363"</span></span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>
<p>在上面所示的终端中，我们使用 <code>nc 10.10.221.57 80</code> 连接到
10.10.221.57 端口 80 。接下来，我们使用
<code>GET / HTTP/1.1</code>为默认页面发出 GET
请求；我们向目标服务器指定客户端支持 HTTP
版本1.1。最后，我们需要为主机命名，因此我们添加了一个新行
<code>host: netcat</code>
；你可以为主机命名任何名称，因为这对本练习没有影响。</p>
<p>根据输出 <code>Server: nginx/1.6.2</code>
，我们可以得知：在目标计算机的端口 80 上，1.6.2版本的 Nginx
正在监听传入的连接。</p>
<p>你还可以使用 netcat 监听 TCP
端口并连接到另一个系统上的监听端口。在服务器系统上，你要打开端口并监听它，你可以使用
<code>nc -lp 1234</code> 或更好的 <code>nc -vnlp 1234</code> ，它相当于
<code>nc -v -l -n -p 1234</code>
，只要端口号前面有<code>-p</code>参数，字母的确切顺序就无关紧要。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">option</th>
<th style="text-align: center;">meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-l</td>
<td style="text-align: center;">Listen mode</td>
</tr>
<tr class="even">
<td style="text-align: center;">-p</td>
<td style="text-align: center;">Specify the Port number</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-n</td>
<td style="text-align: center;">Numeric only; no resolution of hostnames
via DNS</td>
</tr>
<tr class="even">
<td style="text-align: center;">-v</td>
<td style="text-align: center;">Verbose output (optional, yet useful to
discover any bugs)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-vv</td>
<td style="text-align: center;">Very Verbose (optional)</td>
</tr>
<tr class="even">
<td style="text-align: center;">-k</td>
<td style="text-align: center;">Keep listening after client
disconnects</td>
</tr>
</tbody>
</table>
<p>注意：</p>
<ul>
<li><code>-p</code>选项应该出现在你要监听的端口号之前。</li>
<li><code>-n</code>选项将避免 DNS 查找和警告。</li>
<li>小于 1024 的端口号需要 root 权限才能监听。</li>
</ul>
<p>在客户端，你将使用<code>nc 10.10.221.57 PORT_NUMBER</code>。这是使用<code>nc</code>进行回显的例子：成功建立与服务器的连接后，无论你在客户端输入什么，服务器端都会响应，反之亦然。</p>
<h2 id="总结">总结</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Command</th>
<th style="text-align: center;">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">ping</td>
<td style="text-align: center;"><code>ping -c 10 10.10.221.57</code> on
Linux or macOS</td>
</tr>
<tr class="even">
<td style="text-align: center;">ping</td>
<td style="text-align: center;"><code>ping -n 10 10.10.221.57</code> on
MS Windows</td>
</tr>
<tr class="odd">
<td style="text-align: center;">traceroute</td>
<td style="text-align: center;"><code>traceroute 10.10.221.57</code> on
Linux or macOS</td>
</tr>
<tr class="even">
<td style="text-align: center;">tracert</td>
<td style="text-align: center;"><code>tracert 10.10.221.57</code> on MS
Windows</td>
</tr>
<tr class="odd">
<td style="text-align: center;">telnet</td>
<td style="text-align: center;"><code>telnet 10.10.221.57 PORT_NUMBER</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">netcat as client</td>
<td style="text-align: center;"><code>nc 10.10.221.57 PORT_NUMBER</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">netcat as server</td>
<td style="text-align: center;"><code>nc -lvnp PORT_NUMBER</code></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/18/Passive-Reconnaissance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/18/Passive-Reconnaissance/" class="post-title-link" itemprop="url">Passive Reconnaissance（被动侦察）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-18 22:45:44" itemprop="dateCreated datePublished" datetime="2023-01-18T22:45:44+08:00">2023-01-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TryHackMe实验房间：https://tryhackme.com/room/passiverecon</p>
<h2 id="introduction">Introduction</h2>
<p>侦察(recon)可以定义为收集目标信息的初步调查。我们将侦察分为：</p>
<ol type="1">
<li>被动侦察</li>
<li>主动侦察</li>
</ol>
<h3 id="被动侦察">被动侦察</h3>
<p>在被动侦察中，你将依赖于公开可用的知识。它是你可以从公共可用资源访问的知识，而无需直接与目标进行接触。想象一下，你远远地看着目标领地，却没有踏足那片领地。</p>
<p>被动侦察包括许多活动：</p>
<ul>
<li>从公共DNS服务器查找域的 DNS 记录。</li>
<li>检查与目标网站相关的招聘广告。</li>
<li>阅读有关目标公司的新闻文章。</li>
</ul>
<p>本文主要介绍三个命令行工具：</p>
<ul>
<li><code>whois</code></li>
<li><code>nslookup</code></li>
<li><code>dig</code></li>
</ul>
<p>以及两种在线服务的使用：</p>
<ul>
<li>DNSDumpster</li>
<li>Shodan.io</li>
</ul>
<p>这两个在线服务允许我们收集有关目标的信息，而无需直接连接到目标。</p>
<h3 id="主动侦察">主动侦察</h3>
<p>另一方面，主动侦察则不能如此谨慎地进行。它需要与目标直接接触。就像你检查门窗的锁，以及其他潜在的入口。</p>
<p>主动侦察包括的活动如下：</p>
<ul>
<li>连接到其中一个公司服务器，例如：HTTP、FTP、SMTP。</li>
<li>打电话到公司试图获取信息（社会工程）。</li>
<li>冒充修理工进入公司。</li>
</ul>
<p>考虑到主动侦察的侵入性，除非获得适当的法律授权，否则很快就会陷入法律麻烦。</p>
<h2 id="whois">Whois</h2>
<p>WHOIS 是遵循 <a target="_blank" rel="noopener" href="https://www.ietf.org/rfc/rfc3912.txt">RFC
3912</a>
规范的请求和响应协议。WHOIS服务器在TCP端口43上侦听传入的请求。域名注册商负责维护其租赁域名的WHOIS记录。WHOIS服务器回复与请求的域相关的各种信息。通过
WHOIS ，我们可以了解到以下信息：</p>
<ul>
<li>注册商：域名是通过哪个注册商注册的？</li>
<li>注册人的联系信息：姓名、组织、地址、电话等。(除非通过隐私服务隐藏)</li>
<li>创建、更新和过期日期：域名首次注册是什么时候？上次更新是什么时候？什么时候需要更新？</li>
<li>名称服务器(Name Server)：请求哪个服务器解析域名？</li>
</ul>
<p>使用语法是<code>whois DOMAIN_NAME</code>，其中<code>DOMAIN_NAME</code>是你试图获取信息的域。假设我们需要获取<code>tryhackme.com</code>的信息，直接执行<code>whois tryhackme.com</code>。得到如下信息：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ whois tryhackme.com</span><br><span class="line">[Querying whois.verisign-grs.com]</span><br><span class="line">[Redirected to whois.namecheap.com]</span><br><span class="line">[Querying whois.namecheap.com]</span><br><span class="line">[whois.namecheap.com]</span><br><span class="line">Domain name: tryhackme.com</span><br><span class="line">Registry Domain ID: 2282723194_DOMAIN_COM-VRSN</span><br><span class="line">Registrar WHOIS Server: whois.namecheap.com</span><br><span class="line">Registrar URL: http://www.namecheap.com</span><br><span class="line">Updated Date: 2021-05-01T19:43:23.31Z</span><br><span class="line">Creation Date: 2018-07-05T19:46:15.00Z</span><br><span class="line">Registrar Registration Expiration Date: 2027-07-05T19:46:15.00Z</span><br><span class="line">Registrar: NAMECHEAP INC</span><br><span class="line">Registrar IANA ID: 1068</span><br><span class="line">Registrar Abuse Contact Email: abuse@namecheap.com</span><br><span class="line">Registrar Abuse Contact Phone: +1.6613102107</span><br><span class="line">Reseller: NAMECHEAP INC</span><br><span class="line">Domain Status: clientTransferProhibited https://icann.org/epp<span class="comment">#clientTransferProhibited</span></span><br><span class="line">Registry Registrant ID: </span><br><span class="line">Registrant Name: Withheld <span class="keyword">for</span> Privacy Purposes</span><br><span class="line">Registrant Organization: Privacy service provided by Withheld <span class="keyword">for</span> Privacy ehf</span><br><span class="line">[...]</span><br><span class="line">URL of the ICANN WHOIS Data Problem Reporting System: http://wdprs.internic.net/</span><br><span class="line">&gt;&gt;&gt; Last update of WHOIS database: 2021-08-25T14:58:29.57Z &lt;&lt;&lt;</span><br><span class="line"><span class="string">For more information on Whois status codes, please visit https://icann.org/epp</span></span><br></pre></td></tr></tbody></table></figure>
<p>我们可以看到大量信息；我们将按照显示的顺序检查它们。首先，我们注意到我们被重定向到<code>whois.namecheap.com</code>以获取信息。由此可知，在这种情况下，<code>namecheap.com</code>目前正在维护该域名的WHOIS记录。此外，我们可以看到创建日期以及最后更新日期和过期日期。</p>
<p>接下来，我们获得有关注册商和注册人的信息。我们可以找到注册人的姓名和联系信息（除非他们使用某些隐私服务）。尽管未显示在上面，但我们获得了该域的管理员和技术联系人。最后，我们看到域名服务器，如果我们有任何DNS记录要查找，我们应该查询这些服务器。</p>
<p>可以检查收集的信息以发现新的攻击面，例如社会工程或技术攻击。例如，根据渗透测试的范围，你可能会考虑对管理员用户的电子邮件服务器或DNS服务器进行攻击，假设这些服务器属于你的客户端，并且属于渗透测试的范畴。</p>
<p>需要注意的是，由于自动化工具滥用WHOIS查询来获取电子邮件地址，许多WHOIS服务对此采取了措施。例如，他们可能会修改电子邮件地址。此外，许多注册者订阅隐私服务，以避免垃圾邮件发送者获取他们的电子邮件地址，并保持他们的信息隐私。</p>
<h2 id="nslookup">nslookup</h2>
<p>使用<code>nslookup</code>（名称服务器查找）查找域名的IP地址。你需要发出命令<code>nslookup DOMAIN_NAME</code>，例如<code>nslookup tryhackme.com</code>。或者，更一般地，你可以使用<code>nslookup OPTIONS DOMAIN_NAME SERVER</code>。这三个主要参数是：</p>
<ul>
<li><code>OPTIONS</code>包括如下表所示的查询类型。例如，你可以使用<code>A</code>(用于IPv4)或者<code>AAAA</code>(用于IPv6)。</li>
<li><code>DOMAIN_NAME</code>是你需要查询的域名。</li>
<li><code>SERVER</code>是要查询的DNS服务器，你可以选择要查询的任何本地或者公用的DNS服务器。Cloudflare
提供<code>1.1.1.1</code>和<code>1.0.0.1</code>，Google
提供<code>8.8.8.8</code>和<code>8.8.4.4</code>，Quad9
提供<code>9.9.9.9</code>和<code>149.112.112.112</code>。如果你想替换ISP的DNS服务器，可以选择更多的公共DNS服务器。</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Query type</th>
<th style="text-align: center;">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">A</td>
<td style="text-align: center;">IPv4 Addresses</td>
</tr>
<tr class="even">
<td style="text-align: center;">AAAA</td>
<td style="text-align: center;">IPv6 Addresses</td>
</tr>
<tr class="odd">
<td style="text-align: center;">CNAME</td>
<td style="text-align: center;">Canonical Name</td>
</tr>
<tr class="even">
<td style="text-align: center;">MX</td>
<td style="text-align: center;">Mail Servers</td>
</tr>
<tr class="odd">
<td style="text-align: center;">SOA</td>
<td style="text-align: center;">Start of Authority</td>
</tr>
<tr class="even">
<td style="text-align: center;">TXT</td>
<td style="text-align: center;">TXT Records</td>
</tr>
</tbody>
</table>
<p>例如，使用<code>nslookup -type=A tryhackme.com 1.1.1.1</code>或<code>nslookup -type=a tryhackme.com 1.1.1.1</code>能够返回
tryhackme.com 使用过的所有 IPv4 地址。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ nslookup -<span class="built_in">type</span>=A tryhackme.com 1.1.1.1</span><br><span class="line">Server:		1.1.1.1</span><br><span class="line">Address:	1.1.1.1<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 172.67.69.208</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 104.26.11.229</span><br><span class="line">Name:	tryhackme.com</span><br><span class="line">Address: 104.26.10.229</span><br></pre></td></tr></tbody></table></figure>
<p>A 和 AAAA 记录分别用于返回 IPv4和
IPv6地址。从渗透测试的角度来看，这种查找非常有用。在上面的示例中，我们从一个域名开始，获得了三个
IPv4地址。假设这些 IP
地址位于渗透测试的范围之内，就可以进一步检查它们是否存在不安全性。</p>
<p>假设你想了解特定域的电子邮件服务器和配置。可以使用
<code>nslookup-type = MX tryhackme.com</code>。这里有一个例子:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ nslookup -<span class="built_in">type</span>=MX tryhackme.com</span><br><span class="line">Server:		127.0.0.53</span><br><span class="line">Address:	127.0.0.53<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">tryhackme.com	mail exchanger = 5 alt1.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 1 aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 10 alt4.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 10 alt3.aspmx.l.google.com.</span><br><span class="line">tryhackme.com	mail exchanger = 5 alt2.aspmx.l.google.com.</span><br></pre></td></tr></tbody></table></figure>
<p>我们可以看到 tryhackme.com 当前的电子邮件配置使用 Google。由于 MX
会查找 Mail Exchange
服务器，我们注意到当一个邮件服务器尝试向<code>@tryhackme.com</code>
发送电子邮件时，它会尝试连接到订单为 1 的
<code>aspmx.l.google.com</code>。如果繁忙或不可用，邮件服务器将尝试按顺序连接到下一个邮件交换服务器、
<code>alt1.aspmx.l.google.com</code> 或
<code>alt2.aspmx.l.google.com</code>。</p>
<p>Google 提供了列出的邮件服务器;
因此，我们不应该期望邮件服务器运行的是一个易受攻击的服务器版本。但是，在其他情况下，我们可能会发现邮件服务器没有得到充分的安全保护或修补。</p>
<p>当你继续被动地侦察你的目标时，这些信息可能会被证明是有价值的。你可以对其他域名重复类似的查询，并尝试不同的类型，例如<code>-type=txt</code>。谁知道你一路走来会发现什么样的信息呢！</p>
<h2 id="dig">dig</h2>
<p>对于更高级的 DNS 查询和其他功能，可以使用 <code>dig</code>，即“
Domain Information Groper”的首字母缩写。让我们使用 dig 查找 MX
记录，并将它们与 <code>nslookup</code> 进行比较。我们可以使用
<code>dig DOMAIN _ NAME</code>，但是为了指定记录类型，我们将使用
<code>dig DOMAIN_NAME TYPE</code>。或者，我们可以使用
<code>dig @SERVER DOMAIN_NAME TYPE</code>选择要查询的服务器。</p>
<ul>
<li><code>SERVER</code>是要查询的 DNS服务器。</li>
<li><code>DOMAIN_NAME</code>是你正在查询的域名。</li>
<li><code>TYPE</code>包含 DNS 记录类型。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user@TryHackMe$ dig tryhackme.com MX</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.16.19-RH &lt;&lt;&gt;&gt; tryhackme.com MX</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;</span><br></pre></td></tr></tbody></table></figure>
<p>快速比较一下 <code>nslookup</code> 和 <code>dig</code>的输出，发现
<code>dig</code> 返回了更多的信息，比如默认情况下的 TTL (Time To
Live)。如果想查询<code>1.1.1.1</code> DNS 服务器，可以执行
<code>dig @1.1.1.1 tryhackme.com MX</code>。</p>
<h2 id="dnsdumpster">DNSDumpster</h2>
<p>DNS 查找工具(如 nslookup 和
dig)无法自行查找子域。你正在检查的域可能包括一个不同的子域，该子域可以显示关于目标的许多信息。例如，如果
tryhackme.com 拥有子域名的 wiki.tryhackme.com 和 webmail.tryhackme.com
，那么你需要了解更多关于这两个域名的信息，因为它们可以保存关于你的目标的大量信息。有可能其中一个子域已经建立，但没有定期更新。缺乏适当的定期更新通常会导致脆弱的服务。但是我们怎么知道这样的子域存在呢？</p>
<p>我们可以考虑使用多个搜索引擎来编制一个公开已知子域名的列表。一个搜索引擎是不够的;
此外，我们应该期望通过至少数十个搜索结果来找到有趣的数据。毕竟，你正在寻找没有明确公布的子域，因此不必将其添加到搜索结果的第一页。发现此类子域的另一种方法是依靠暴力强制查询来查找哪些子域具有DNS记录。</p>
<p>为了避免这种耗时的搜索，可以使用一个在线服务，该在线服务可以提供 DNS
查询的详细结果，如 <a target="_blank" rel="noopener" href="https://dnsdumpster.com/">DNSDumpster</a>。如果我们在 DNSDumpster
中搜索 <code>tryhackme.com</code>，我们会发现子域名
<code>blog.tryhackme.com</code> ，这是典型的 DNS
查询所无法提供的。此外，DNSDumpster
将以易于阅读的表格和图表的形式返回收集的 DNS 信息。DNSDumpster
还将提供任何收集到的有关监听服务器的信息。</p>
<h2 id="shodan.io">Shodan.io</h2>
<p>当你的任务是针对特定目标运行渗透测试时，作为被动侦察阶段的一部分，像
<a target="_blank" rel="noopener" href="https://www.shodan.io/">Shodan.io</a>
这样的服务可以帮助你了解客户网络的各种信息，而不需要主动连接。此外，在防御方面，你可以使用
Shodan.io 中的不同服务来了解属于你的组织的已连接和已公开的设备。</p>
<p>Shodan.io
试图连接到每一个可以在线访问的设备，以建立一个连接“事物”的搜索引擎，与网页搜索引擎形成对比。一旦得到响应，它就会收集与服务相关的所有信息，并将其保存在数据库中，以便进行搜索。以下是
tryhackme.com 服务器的保存记录。</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/hxt616/PicGo@main/img/image-20230118223806186.png" alt="image-20230118223806186">
<figcaption aria-hidden="true">image-20230118223806186</figcaption>
</figure>
<p>这个记录显示了一个 Web 服务器; 然而，正如前面提到的，Shodan.io
收集与它能在线找到的任何设备相关的信息。在 Shodan.io 上搜索
<code>tryhackme.com</code> 至少会显示上面截图所示的记录。通过 Shodan.io
的搜索结果，我们可以了解到一些与搜索相关的东西，比如:</p>
<ul>
<li>IP地址</li>
<li>托管公司</li>
<li>地理位置</li>
<li>服务器类型与版本</li>
</ul>
<h2 id="总结">总结</h2>
<table>
<colgroup>
<col style="width: 46%">
<col style="width: 53%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Purpose</th>
<th style="text-align: center;">Commandline Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Lookup WHOIS record</td>
<td style="text-align: center;"><code>whois tryhackme.com</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">Lookup DNS A records</td>
<td style="text-align: center;"><code>nslookup -type=A tryhackme.com</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Lookup DNS MX records at DNS server</td>
<td style="text-align: center;"><code>nslookup -type=MX tryhackme.com 1.1.1.1</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">Lookup DNS TXT records</td>
<td style="text-align: center;"><code>nslookup -type=TXT tryhackme.com</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Lookup DNS A records</td>
<td style="text-align: center;"><code>dig tryhackme.com A</code></td>
</tr>
<tr class="even">
<td style="text-align: center;">Lookup DNS MX records at DNS server</td>
<td style="text-align: center;"><code>dig @1.1.1.1 tryhackme.com MX</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Lookup DNS TXT records</td>
<td style="text-align: center;"><code>dig tryhackme.com TXT</code></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/01/04/ContentDiscovery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/04/ContentDiscovery/" class="post-title-link" itemprop="url">Content Discovery（搜集网站信息）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-04 10:00:10" itemprop="dateCreated datePublished" datetime="2023-01-04T10:00:10+08:00">2023-01-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TryHackMe/" itemprop="url" rel="index"><span itemprop="name">TryHackMe</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Learn the various ways of discovering hidden or private content on a
webserver that could lead to new vulnerabilities.</p>
<p>TryHackMe实验房间： https://tryhackme.com/room/contentdiscovery</p>
<h2 id="manually手动">Manually（手动）</h2>
<h3 id="robots.txt">Robots.txt</h3>
<p>该文件是个文档，它告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取，而搜索引擎则通过读取robots.txt文件来识别这个页面是否允许被抓取；或者禁止特定的搜索引擎爬取网站。</p>
<p>通常的做法是限制某些网站区域，使其不显示在搜索引擎结果中。这些页面可能是为网站客户提供的管理门户或文件，而<code>robots.txt</code>文件为我们提供了网站上大量（网站拥有者不希望我们访问的）网址。</p>
<h3 id="favicon网页图标">Favicon（网页图标）</h3>
<p>有时，当框架用于构建网站时，作为安装一部分的网页图标会被遗留下来，如果网站开发人员没有用自定义的图标替换它，这可以为我们提供关于框架的线索。OWASP托管一个公共框架图标数据库，您可以使用该数据库对照目标
<strong>favicon</strong>
进行检查（https://wiki.owasp.org/index.php/OWASP_favicon_database），一旦我们了解了框架堆栈，我们就可以使用外部资源来了解更多关于它的信息。</p>
<p>注：上述网站中是使用 md5 哈希值来表示对应的图标。</p>
<h3 id="sitemap.xml">Sitemap.xml</h3>
<p>与限制搜索引擎爬虫的 robots.txt 文件不同，sitemap.xml
文件提供了网站所有者希望在搜索引擎上列出的每个文件的列表。这些有时可能包含网站中难以导航的区域，甚至列出当前网站不再使用但仍在幕后工作的一些旧网页。</p>
<h3 id="http-headers">HTTP Headers</h3>
<p>当客户端向Web服务器发出请求时，服务器会返回各种 HTTP headers，这些
headers 通常包含一些有用的信息，例如 webserver
软件使用的编程/脚本语言，软件版本等。</p>
<p>可以使用<code>curl</code>工具对服务器发起请求。</p>
<h3 id="framework-stack框架">Framework Stack（框架）</h3>
<p>找到网站的框架信息，并通过框架网站找到漏洞。</p>
<h2 id="automated自动">Automated（自动）</h2>
<p><strong>Automated Discovery</strong>
是指使用工具发现内容而不是手动进行的过程。此过程是自动化的，因为它通常包含向Web服务器的数百，数千甚至数百万个请求。这些请求检查网站上是否存在文件或目录，使我们可以访问我们以前不知道的资源。使用称为
<strong>Wordlists</strong> 的资源使此过程成为可能。</p>
<p><strong>Wordlists</strong>
只是包含一长串常用单词的文本文件；它们可以涵盖许多不同的用例。例如，密码表将包含最常用的密码。</p>
<h3 id="ffuf">ffuf</h3>
<p>ffuf 是一款Go语言编写的高速Web
Fuzzer工具，该项目深受大型项目gobuster和wfuzz的启发。使用 wordlists
进行扫描。</p>
<h3 id="dirb">dirb</h3>
<p>基于字典的 web 目录扫描工具。</p>
<h3 id="gobuster">Gobuster</h3>
<p>主要用于网站目录扫描和子域名收集，对目录、文件、DNS和VHost等对象进行暴力破解攻击。</p>
<h2 id="osintopen-source-intelligence">OSINT（Open-Source
Intelligence）</h2>
<h3 id="google-hacking-dorking">Google Hacking / Dorking</h3>
<p>利用Google高级搜索获取信息，例如下面的表格：</p>
<table>
<colgroup>
<col style="width: 11%">
<col style="width: 20%">
<col style="width: 68%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Filter</strong></th>
<th><strong>Example</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>site</td>
<td>site:tryhackme.com</td>
<td>returns results only from the specified website address</td>
</tr>
<tr class="even">
<td>inurl</td>
<td>inurl:admin</td>
<td>returns results that have the specified word in the URL</td>
</tr>
<tr class="odd">
<td>filetype</td>
<td>filetype:pdf</td>
<td>returns results which are a particular file extension</td>
</tr>
<tr class="even">
<td>intitle</td>
<td>intitle:admin</td>
<td>returns results that contain the specified word in the title</td>
</tr>
</tbody>
</table>
<h3 id="wappalyzer">Wappalyzer</h3>
<p>Wappalyzer（https://www.wappalyzer.com/）是一种在线工具，可以帮助识别网站使用的技术，例如框架、内容管理系统（CMS）、支付处理器等，甚至可以找到对应的版本号。</p>
<h3 id="wayback-machine网站时光机">Wayback Machine（网站时光机）</h3>
<p>网站时光机是万维网的数字档案馆，由位于美国加利福尼亚州旧金山的非营利组织互联网档案馆创建，亦为该组织最重要的服务之一。它允许用户“回到过去”，查看过去的网站的样子。通过该网站可以获取网站的一些依旧在使用的旧页面。</p>
<h3 id="github">Github</h3>
<p>可以使用GitHub的搜索功能来查找公司名称或网站名称，以尝试找到属于目标的存储库。一旦发现，或许可以访问尚未找到的源代码，密码或其他内容。</p>
<h3 id="s3-buckets">S3 Buckets</h3>
<p>S3
Buckets是亚马逊AWS提供的一项存储服务，允许人们将文件甚至静态网站内容保存在通过HTTP和HTTPS访问的云中。文件的所有者可以设置访问权限，以使文件公开、私有甚至可写。有时，这些访问权限设置不正确，无意中允许访问公众无法访问的文件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/17/Rotate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/17/Rotate/" class="post-title-link" itemprop="url">Rotate</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-17 00:01:32" itemprop="dateCreated datePublished" datetime="2022-10-17T00:01:32+08:00">2022-10-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/" itemprop="url" rel="index"><span itemprop="name">密码学</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>636</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考：https://zhuanlan.zhihu.com/p/43568725
https://www.jiuzhang.com/solutions/rotate-array/</p>
<h1 id="翻转数组rotate-array">翻转数组（Rotate Array）</h1>
<p>给定一个数组，将数组向右移动k步，其中k为非负数。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,3,4,5,6,7] and k = 3</span><br><span class="line">Output: [5,6,7,1,2,3,4]</span><br><span class="line">Explanation:</span><br><span class="line">rotate 1 steps to the right: [7,1,2,3,4,5,6]</span><br><span class="line">rotate 2 steps to the right: [6,7,1,2,3,4,5]</span><br><span class="line">rotate 3 steps to the right: [5,6,7,1,2,3,4]</span><br></pre></td></tr></tbody></table></figure>
<p>假设给定一个二进制数<code>a='0b11001101'</code>，（<strong>必须为8位或16位或32位</strong>）求
rotate right 3 的结果，代码如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rotate</span>(<span class="params">self, nums, k</span>):</span><br><span class="line">            <span class="comment"># Write your code here</span></span><br><span class="line">            length = <span class="built_in">len</span>(nums)</span><br><span class="line">            k = k % length</span><br><span class="line">            result = nums[length - k : length] + nums[:length - k]</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">a=<span class="string">'0b11001101'</span></span><br><span class="line">a=<span class="built_in">list</span>(a[<span class="number">2</span>:])</span><br><span class="line">r=Solution()</span><br><span class="line">x=r.rotate(a,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></tbody></table></figure>
<p>运行结果为<code>['1', '0', '1', '1', '1', '0', '0', '1']</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/16/%E5%85%B3%E4%BA%8Egit%E7%9A%84%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/hxt.jpg">
      <meta itemprop="name" content="hxt">
      <meta itemprop="description" content="May the Force be with you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hxt's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/16/%E5%85%B3%E4%BA%8Egit%E7%9A%84%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">关于git的远程仓库问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-10-16 23:49:52" itemprop="dateCreated datePublished" datetime="2022-10-16T23:49:52+08:00">2022-10-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>835</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近一直断断续续地学习git的使用方法，今天在学习的时候遇到了一个关于远程仓库的问题：<strong>如何在克隆远程仓库后，将其关联到自己的远程仓库。</strong></p>
<p>当使用 git clone
时，就会将远程仓库克隆到本地。利用命令<code>git remote -v</code>查看克隆的远程仓库的信息，例如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">origin  https://github.com/user/repo.git (fetch)</span><br><span class="line">origin  https://github.com/user/repo.git (push)</span><br></pre></td></tr></tbody></table></figure>
<p>origin 为默认的远程仓库的别名。此时， origin 默认的 url
是原始仓库的地址。想要关联到新的远程仓库主要有两种方法：</p>
<h3 id="添加远程仓库">添加远程仓库</h3>
<p>使用<code>git remote add</code>命令添加。</p>
<p>该命令采用两个参数：远程名称（例如<code>new</code> ）、远程 URL（例如
<code>https://github.com/user_1/repo.git</code>）。</p>
<p>例如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add new https://github.com/user_1/repo.git <span class="comment"># Set a new remote</span></span><br><span class="line"></span><br><span class="line">$ git remote -v</span><br><span class="line">origin  https://github.com/user/repo.git (fetch) <span class="comment"># 原始仓库</span></span><br><span class="line">origin  https://github.com/user/repo.git (push)  <span class="comment"># 原始仓库</span></span><br><span class="line">new  https://github.com/user_1/repo.git (fetch) <span class="comment"># 新添加的远程仓库</span></span><br><span class="line">new  https://github.com/user_1/repo.git (push) <span class="comment"># 新添加的远程仓库</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="更改远程仓库的-url">更改远程仓库的 URL</h3>
<p>使用<code>git remote set-url</code>命令更改 URL。</p>
<p>参考：https://docs.github.com/cn/get-started/getting-started-with-git/managing-remote-repositories#changing-a-remote-repositorys-url</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hxt"
      src="/images/hxt.jpg">
  <p class="site-author-name" itemprop="name">hxt</p>
  <div class="site-description" itemprop="description">May the Force be with you.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">172</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hxt</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">365k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:32</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
